<!doctypehtml><html lang="ms-MY"class="overflow-hidden overscroll-none"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>Matematik Ceria: Penambahan (Aktiviti)</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap"rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script><style>body{font-family:Fredoka,sans-serif;background-color:#f0fdf4;background-image:radial-gradient(#86efac 2px,transparent 2px);background-size:30px 30px}.game-card{background:#fff;border:4px solid #475569;box-shadow:8px 8px 0 #00000020;border-radius:1.5rem;position:relative;display:flex;align-items:center;justify-content:center;flex-direction:column;overflow:hidden}.btn-3d{transition:all .1s;border-bottom-width:6px;border-color:rgba(0,0,0,.2);transform:translateY(0);cursor:pointer;display:inline-block}.btn-3d:active:not(:disabled){transform:translateY(4px);border-bottom-width:2px;box-shadow:none}.btn-3d:disabled{opacity:.6;cursor:not-allowed;border-bottom-width:6px;filter:grayscale(100%)}.grid-100{display:grid;grid-template-columns:repeat(10,1fr);gap:1px;width:100%;height:100%}.cell-100{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border:1px solid #cbd5e1;border-radius:3px;font-weight:700;font-size:.75rem;cursor:pointer;transition:all .1s;background:#fff;padding:0;line-height:1}.cell-100:hover{background:#f1f5f9;z-index:5;transform:scale(1.1)}.cell-100.active{background:#3b82f6;color:#fff;border-color:#1d4ed8;transform:scale(1.1);box-shadow:0 4px 6px -1px rgba(59,130,246,.5);z-index:10}.cell-100.jump{background:#22c55e;color:#fff;animation:popIn .3s}.grid-scroll-container{width:100%;padding:0}.pupil-cell{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border:3px solid #cbd5e1;border-radius:50%;background:#fff;font-size:1.2rem;transition:all .2s}.pupil-cell.active{border-color:#ef4444;background:#fee2e2;transform:scale(1.2);box-shadow:0 0 15px #ef4444}.race-track{position:relative;width:100%;height:60px;background:#e2e8f0;border-radius:30px;margin-bottom:10px;border:2px solid #94a3b8;overflow:hidden}.race-line{position:absolute;top:50%;left:0;right:0;height:2px;background:repeating-linear-gradient(to right,#94a3b8 0,#94a3b8 10px,transparent 10px,transparent 20px)}.racer{position:absolute;top:50%;transform:translateY(-50%);font-size:2.5rem;transition:left .5s ease-in-out;z-index:10}.finish-line{position:absolute;right:20px;top:0;bottom:0;width:10px;background:repeating-linear-gradient(45deg,#000,#000 10px,#fff 10px,#fff 20px);z-index:5}@keyframes popIn{0%{transform:scale(0)}100%{transform:scale(1)}}@media (max-height:650px){.fixed.top-4{top:.25rem!important;padding:0 .5rem!important}.max-w-4xl.rounded-full{padding:.25rem 1rem!important;border-width:2px!important}.text-3xl{font-size:1.5rem!important}#info-text{font-size:1.1rem!important;margin-top:0!important}#speak-btn{padding:.25rem!important;font-size:.9rem!important}.max-w-6xl{padding:.25rem!important}.game-card{padding:.5rem!important;margin-bottom:.25rem!important;border-width:2px!important;min-height:auto!important}.game-card .py-10{padding:1rem 0!important}.game-card .text-8xl{font-size:3rem!important;margin-bottom:.25rem!important}.game-card h2{font-size:1.5rem!important;margin-bottom:0!important}.game-card p{font-size:.9rem!important;margin-bottom:.5rem!important}.game-card .text-4xl{font-size:1.25rem!important;margin-top:0!important}.bg-white\/80{padding:.5rem!important;border-width:1px!important}.bg-white\/80 h3{font-size:1rem!important;margin-bottom:.25rem!important}.grid{gap:.25rem!important;margin-bottom:.25rem!important}.btn-3d{padding:.5rem .25rem!important;font-size:.75rem!important;border-bottom-width:3px!important;border-radius:.5rem!important}.btn-3d:active:not(:disabled){transform:translateY(2px)!important;border-bottom-width:1px!important}.border-t-2{padding-top:.25rem!important;border-width:1px!important}.border-t-2 .btn-3d{padding:.25rem 1rem!important;font-size:.8rem!important}.p-4.flex.flex-col{padding:.5rem!important}.text-3xl.font-black{font-size:2rem!important;margin-bottom:.25rem!important}.pupil-cell{width:30px!important;height:30px!important;font-size:1rem!important;border-width:2px!important}.bg-green-50.rounded-3xl{padding:.5rem!important;margin-bottom:.5rem!important}#kbResult .text-3xl{font-size:1.5rem!important;padding:.5rem!important}.space-y-4>*+*{margin-top:.5rem!important}.text-3xl.tracking-widest{font-size:1.5rem!important}.p-4{padding:.5rem!important}.text-2xl.font-mono{font-size:1.5rem!important;padding:.5rem!important}.grid-scroll-container{max-height:none!important;overflow:visible!important;padding:0!important}.cell-100{font-size:.8rem!important}.bg-pink-50.sticky{position:relative!important;top:auto!important;margin-top:.5rem!important}}</style><body class="h-screen w-screen overflow-hidden text-slate-800 flex flex-col overscroll-none"><div class="flex-none p-4 z-50 pointer-events-none w-full"><div class="max-w-4xl mx-auto bg-green-400 border-4 border-green-600 rounded-full px-6 py-3 shadow-xl flex items-center justify-between pointer-events-auto transform hover:scale-[1.01] transition-transform"><div class="flex items-center gap-3"><span class="text-3xl animate-bounce">üßÆ</span> <span id="info-text"class="text-xl font-bold text-green-900 leading-none mt-1">Matematik Asas</span></div><button id="speak-btn"onclick="speakInfo()"class="bg-white hover:bg-green-50 text-green-600 border-2 border-green-200 rounded-full p-2 transition-colors shadow-sm">üîä</button></div></div><div class="flex-1 w-full max-w-6xl mx-auto p-2 flex flex-col min-h-0"><div class="game-card p-2 mb-2 flex-1 w-full"><div id="activity-content"class="w-full relative z-10 flex flex-col items-center justify-center h-full transition-opacity duration-200"><div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">‚ûï</div><h2 class="text-5xl font-bold text-emerald-600 mb-4">Aktiviti Penambahan</h2><p class="text-xl text-slate-500 mb-8 font-semibold">Kotak Beracun, Masalah Harian & Papan 100.<div class="text-4xl animate-bounce">üëá</div></div></div></div><div class="flex-none bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg p-2 border-2 border-white"><h3 class="text-lg font-bold text-slate-700 mb-1 text-center">üéÆ Pilih Aktiviti</h3><div class="grid grid-cols-5 gap-2 mb-2"><button onclick="loadActivity(1)"class="btn-3d bg-blue-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">üÉè Kad</button> <button onclick="loadActivity(2)"class="btn-3d bg-red-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">üèéÔ∏è Lumba</button> <button onclick="loadActivity(3)"class="btn-3d bg-purple-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">ü¶ã Rama</button> <button onclick="loadActivity(4)"class="btn-3d bg-orange-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">üü° Guli</button> <button onclick="loadActivity(5)"class="btn-3d bg-pink-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">üíØ Grid</button></div><div class="flex justify-center gap-4 border-t-2 border-slate-100 pt-2"><button onclick="clearActivity()"class="btn-3d bg-slate-400 text-white font-bold py-1 px-4 rounded-full text-base">üè† Menu</button> <button onclick="nextActivity()"class="btn-3d bg-indigo-500 text-white font-bold py-1 px-6 rounded-full text-lg">Seterusnya ‚û°Ô∏è</button></div></div></div><script>/* ... existing script start ... */
        /* Note: I am replacing a chunk including the buttons to fix the Lumba emoji and then I will jump to setupAct5. 
           Wait, ReplaceFileContent performs a single contiguous replacement. I should do two separate replacements or one if contiguous.
           Points 1 and 2 are far apart (line 398 vs 750). I should use `multi_replace_file_content` or two `replace_file_content` calls. 
           This call will focus on the Lumba button fix.
        */
        /* --- STANDARD HELPERS --- */
        let currentActivity = 0;
        let ttsEnabled = false;
        let currentInfo = "Pilih aktiviti untuk bermula!";

        function speak(text) {
            if (!ttsEnabled || !('speechSynthesis' in window)) return;
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(text); u.lang = 'ms-MY'; u.rate = 0.95; u.pitch = 1.05;
            const ms = window.speechSynthesis.getVoices().find(v => v.lang === 'ms-MY' || v.lang?.startsWith('ms'));
            if (ms) u.voice = ms;
            window.speechSynthesis.speak(u);
        }

        function setInfo(text) {
            currentInfo = text; const infoEl = document.getElementById('info-text');
            infoEl.style.opacity = 0; setTimeout(() => { infoEl.textContent = text; infoEl.style.opacity = 1; }, 200);
        }

        function speakInfo() {
            if (!ttsEnabled) { ttsEnabled = true; document.getElementById('speak-btn').classList.add('bg-green-100', 'text-green-600'); }
            speak(currentInfo);
        }

        function cryptoRandomId() { return Math.random().toString(36).slice(2, 9); }



        /* --- ROUTER --- */
        function loadActivity(n) {
            // kbPauseMusic(); // Removed
            currentActivity = n;
            const content = document.getElementById('activity-content');
            content.style.opacity = 0;
            setTimeout(() => {
                if (n === 1) setupAct1(content);
                else if (n === 2) setupAct2(content);
                else if (n === 3) setupAct3(content);
                else if (n === 4) setupAct4(content);
                else if (n === 5) setupAct5(content);
                content.style.opacity = 1;
            }, 200);
        }

        function clearActivity() {
            // kbPauseMusic(); // Removed
            currentActivity = 0;
            document.getElementById('activity-content').innerHTML = `<div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">‚ûï</div><h2 class="text-5xl font-bold text-emerald-600 mb-4">Aktiviti Penambahan</h2><p class="text-2xl text-slate-500 mb-8 font-semibold">Pilih butang di bawah.</p></div>`;
            setInfo("Pilih aktiviti di bawah.");
        }
        function nextActivity() { let next = currentActivity + 1; if (next > 5) next = 1; loadActivity(next); }


        /* =========================================
           LOGIK AKTIVITI
           ========================================= */

        /* --- 1. Kad Soalan --- */
        function setupAct1(content) {
            setInfo("Ambil kad, sebut jumlah, kemudian semak.");
            const makeCard = () => {
                const a = Math.floor(2 + Math.random() * 8), b = Math.floor(2 + Math.random() * 8), sum = a + b;
                return { a, b, sum, id: cryptoRandomId() };
            };
            const cards = Array.from({ length: 3 }, makeCard);

            content.innerHTML = `
            <div class="w-full max-w-4xl text-center">
                <h3 class="text-2xl font-bold text-blue-600 mb-2">üÉè Kad Spontan</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                    ${cards.map(c => `
                        <div class="bg-blue-50 border-4 border-blue-200 rounded-2xl p-4 flex flex-col items-center relative">
                            <div class="text-3xl font-black text-blue-800 mb-2">${c.a} + ${c.b}</div>
                            
                            <button onclick="revealA1(this, ${c.a}, ${c.b}, ${c.sum})" class="btn-3d bg-blue-500 text-white px-2 py-1 rounded-xl font-bold text-sm w-full">
                                üëÄ Jawapan
                            </button>
                            
                            <div class="answer-box hidden mt-2 bg-white p-2 rounded-xl border-2 border-blue-100 w-full animate-popIn">
                                <div class="text-2xl font-bold text-blue-600">${c.sum}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
        }
        window.revealA1 = function (btn, a, b, sum) {
            const box = btn.nextElementSibling;
            box.classList.remove('hidden');
            btn.style.display = 'none';
            const msg = `${a} tambah ${b} ialah ${sum}.`;
            setInfo(msg); speak(msg);
        }

        /* --- 2. Lumba Kereta (Math Race) --- */
        let racePos = 0, raceBotPos = 0, raceTarget = 8, raceTimer = null;
        let raceQ = null;

        function setupAct2(content) {
            setInfo("Jawab dengan pantas untuk menang!");
            racePos = 0; raceBotPos = 0;
            clearInterval(raceTimer);

            content.innerHTML = `
            <div class="w-full max-w-4xl text-center">
                <h3 class="text-2xl font-bold text-red-600 mb-4">üèéÔ∏è Lumba Kereta Pintar</h3>
                
                <div class="race-track relative shadow-inner bg-slate-200">
                    <div class="finish-line"></div>
                    <div class="race-line"></div>
                    
                    <!-- Player Car -->
                    <div id="player-car" class="racer transition-all duration-500 text-blue-600" style="left: 2%">üèéÔ∏è</div>
                    
                    <!-- Bot Car -->
                    <div id="bot-car" class="racer transition-all duration-500 text-red-600 grayscale opacity-80" style="left: 2%; top: 65% !important;">üèéÔ∏è</div>
                </div>

                <div id="race-game-area" class="mt-8">
                     <div class="mb-6">
                        <div id="race-question" class="text-5xl font-black text-slate-700 h-20 flex items-center justify-center animate-bounce">
                           Siedia...
                        </div>
                     </div>
                     
                     <div id="race-options" class="grid grid-cols-3 gap-4 max-w-2xl mx-auto">
                        <!-- Options generated here -->
                     </div>
                </div>
                
                <button onclick="raceStart()" id="btn-race-start" class="btn-3d bg-green-500 text-white px-8 py-3 rounded-2xl font-bold text-xl shadow-lg mt-4 animate-pulse">
                    MULA LUMBA!
                </button>
            </div>
            `;
        }

        window.raceStart = function () {
            document.getElementById('btn-race-start').style.display = 'none';
            racePos = 0; raceBotPos = 0;
            updateCars();

            // Bot Logic
            raceTimer = setInterval(() => {
                if (raceBotPos < 100) {
                    raceBotPos += 4; // Bot moves steadily
                    updateCars();
                    checkWin();
                }
            }, 1000); // reduced speed slightly for fair play

            nextRaceQ();
        }

        function updateCars() {
            // Map steps 0-8 to percentage 2% - 90%
            const pPct = 2 + (racePos / raceTarget) * 88;
            const bPct = 2 + (raceBotPos / 100) * 88;

            const pCar = document.getElementById('player-car');
            const bCar = document.getElementById('bot-car');
            if (pCar) pCar.style.left = Math.min(pPct, 90) + '%';
            if (bCar) bCar.style.left = Math.min(bPct, 90) + '%';
        }

        function nextRaceQ() {
            const a = Math.floor(2 + Math.random() * 9);
            const b = Math.floor(2 + Math.random() * 9);
            const sum = a + b;
            raceQ = { a, b, sum };

            const qEl = document.getElementById('race-question');
            qEl.innerText = `${a} + ${b} = ?`;
            speak(`${a} tambah ${b}`);

            // Generate options
            let opts = [sum];
            while (opts.length < 3) {
                let r = Math.max(2, sum - 2 + Math.floor(Math.random() * 5));
                if (!opts.includes(r)) opts.push(r);
            }
            opts.sort(() => Math.random() - 0.5);

            document.getElementById('race-options').innerHTML = opts.map(o => `
                <button onclick="answerRace(${o})" class="btn-3d bg-white border-4 border-slate-200 text-slate-700 hover:border-blue-400 hover:bg-blue-50 text-3xl font-bold py-4 rounded-2xl transition-all">
                    ${o}
                </button>
            `).join('');
        }

        window.answerRace = function (val) {
            if (racePos >= raceTarget || raceBotPos >= 100) return;

            if (val === raceQ.sum) {
                // Correct
                racePos++;
                updateCars();
                speak("Betul");
                checkWin();
                if (racePos < raceTarget) nextRaceQ();
            } else {
                // Wrong
                document.getElementById('race-question').classList.add('text-red-500');
                speak("Salah");
                setTimeout(() => document.getElementById('race-question').classList.remove('text-red-500'), 500);
            }
        }

        function checkWin() {
            if (racePos >= raceTarget) {
                clearInterval(raceTimer);
                document.getElementById('race-game-area').innerHTML = `
                    <div class="p-8 bg-green-100 rounded-3xl border-4 border-green-500 animate-popIn">
                        <h2 class="text-4xl font-black text-green-600 mb-4">üèÜ MENANG!</h2>
                        <p class="text-xl text-green-800">Awak sangat laju!</p>
                        <button onclick="setupAct2(document.getElementById('activity-content'))" class="btn-3d bg-green-500 text-white px-6 py-2 rounded-xl font-bold mt-4">Main Lagi</button>
                    </div>
                `;
                speak("Tahniah! Awak menang.");
                confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
            } else if (raceBotPos >= 100) {
                clearInterval(raceTimer);
                document.getElementById('race-game-area').innerHTML = `
                    <div class="p-8 bg-slate-100 rounded-3xl border-4 border-slate-400 animate-popIn">
                        <h2 class="text-4xl font-black text-slate-600 mb-4">üöó KALAH...</h2>
                        <p class="text-xl text-slate-800">Robot menang kali ini.</p>
                        <button onclick="setupAct2(document.getElementById('activity-content'))" class="btn-3d bg-blue-500 text-white px-6 py-2 rounded-xl font-bold mt-4">Cuba Lagi</button>
                    </div>
                `;
                speak("Cuba lagi.");
            }
        }

        /* --- 3. Masalah Rama-rama --- */
        function setupAct3(content) {
            setInfo("Baca cerita rama-rama.");
            const items = [
                { left: 3, right: 4, emoji: 'ü¶ã', teks: '3 rama-rama hinggap. 4 lagi datang.' },
                { left: 2, right: 5, emoji: 'üêû', teks: '2 kumbang di daun. 5 lagi sampai.' }
            ];

            content.innerHTML = `
            <div class="w-full max-w-4xl text-center">
                <h3 class="text-2xl font-bold text-purple-600 mb-4">ü¶ã Masalah: Haiwan</h3>
                <div class="space-y-4">
                    ${items.map((it, idx) => `
                        <div class="bg-purple-50 border-2 border-purple-200 rounded-2xl p-4">
                            <div class="text-3xl mb-2 tracking-widest">${it.emoji.repeat(it.left)} + ${it.emoji.repeat(it.right)}</div>
                            <p class="text-lg font-bold text-purple-900 mb-2">"${it.teks}"</p>
                            
                            <button onclick="revealStory(this, ${it.left}, ${it.right})" class="btn-3d bg-purple-500 text-white px-4 py-2 rounded-xl font-bold text-sm">
                                Kira Jumlah
                            </button>
                            
                            <div class="hidden mt-2 bg-white p-2 rounded-xl border-2 border-purple-100 animate-popIn">
                                <div class="text-2xl font-bold text-purple-600">${it.left} + ${it.right} = ${it.left + it.right}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
        }
        window.revealStory = function (btn, a, b) {
            btn.nextElementSibling.classList.remove('hidden');
            btn.style.display = 'none';
            speak(`Jumlahnya ${a + b} ekor.`);
        }


        /* --- 4. Masalah Guli --- */
        function setupAct4(content) {
            setInfo("Lihat bentuk lazim.");
            const problems = [{ nama: 'Ali', a: 9, b: 5 }, { nama: 'Siti', a: 7, b: 6 }];

            content.innerHTML = `
             <div class="w-full max-w-4xl text-center">
                <h3 class="text-2xl font-bold text-orange-600 mb-4">üü° Masalah Guli</h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${problems.map((p, i) => `
                        <div class="bg-orange-50 border-2 border-orange-200 rounded-2xl p-4">
                            <p class="text-base font-bold text-orange-900 mb-2 text-left">
                                ${p.nama} ada <span class="text-red-600">${p.a}</span>. 
                                Kawan beri <span class="text-blue-600">${p.b}</span>.
                            </p>
                            
                            <div class="bg-white border-2 border-slate-200 rounded-xl p-4 w-fit mx-auto shadow-inner text-2xl font-mono text-right leading-loose">
                                <div class="text-red-500">${p.a < 10 ? '&nbsp;' + p.a : p.a}</div>
                                <div class="border-b-4 border-slate-800 text-blue-500 relative">
                                    <span class="absolute left-[-20px] text-slate-400 text-lg top-3">+</span>
                                    ${p.b < 10 ? '&nbsp;' + p.b : p.b}
                                </div>
                                <div class="font-black text-orange-600 pt-1 hidden result-${i}">
                                    ${p.a + p.b}
                                </div>
                            </div>
                            
                            <button onclick="revealGuli(${i}, ${p.a}, ${p.b})" class="btn-3d bg-orange-500 text-white px-4 py-2 rounded-xl font-bold mt-4 w-full">
                                Kira
                            </button>
                        </div>
                    `).join('')}
                 </div>
            </div>
        `;
        }
        window.revealGuli = function (idx, a, b) {
            document.querySelector(`.result-${idx}`).classList.remove('hidden');
            speak(`${a} tambah ${b} ialah ${a + b}.`);
        }


        /* --- 5. Papan 100 --- */
        let startNum = null, currentNum = null, totalAdded = 0;

        function setupAct5(content) {
            setInfo("Pilih nombor mula di papan.");
            startNum = null; currentNum = null; totalAdded = 0;

            let gridHTML = '';
            for (let i = 1; i <= 100; i++) {
                gridHTML += `<div class="cell-100" id="c-${i}" onclick="click100(${i})">${i}</div>`;
            }

            content.innerHTML = `
            content.innerHTML = `
                < div class="w-full max-w-6xl text-center h-full flex flex-col" >
                <h3 class="text-xl font-bold text-pink-600 mb-1 shrink-0">üíØ Papan 100</h3>
                
                <div class="flex flex-row gap-2 h-full items-start overflow-hidden pb-1">
                    <div class="flex-1 h-full overflow-hidden border-2 border-slate-200 rounded-xl p-1 bg-white">
                        <div class="grid-scroll-container h-full">
                            <div class="grid-100">${gridHTML}</div>
                        </div>
                    </div>
                    
                    <div class="bg-pink-50 border-2 border-pink-200 rounded-xl p-2 flex flex-col gap-2 w-32 shrink-0 h-full overflow-y-auto">
                        <div class="text-sm font-bold text-pink-800 mb-1">Kawalan</div>
                        <div class="flex flex-col gap-1 w-full">
                            <button onclick="jump(1)" class="btn-3d bg-white border-pink-200 text-pink-600 font-bold py-1 px-2 rounded-lg text-xs">+1</button>
                            <button onclick="jump(2)" class="btn-3d bg-white border-pink-200 text-pink-600 font-bold py-1 px-2 rounded-lg text-xs">+2</button>
                            <button onclick="jump(5)" class="btn-3d bg-white border-pink-200 text-pink-600 font-bold py-1 px-2 rounded-lg text-xs">+5</button>
                            <button onclick="jump(10)" class="btn-3d bg-white border-pink-200 text-pink-600 font-bold py-1 px-2 rounded-lg text-xs">+10</button>
                        </div>
                        
                        <div class="mt-auto p-1 bg-white rounded-lg border-2 border-pink-100">
                            <div class="text-[10px] text-slate-400 font-bold">Ayat Matematik</div>
                            <div id="eq-display" class="text-sm font-bold text-slate-700 min-h-[20px] flex items-center justify-center">---</div>
                        </div>

                        <button onclick="setupAct5(document.getElementById('activity-content'))" class="btn-3d bg-slate-400 text-white font-bold py-1 rounded-lg mt-1 text-xs">Reset</button>
                    </div>
                </div>
            </div >
                `;
        }

        window.click100 = function (n) {
            if (startNum === null) {
                startNum = n; currentNum = n; totalAdded = 0;
                document.querySelectorAll('.cell-100').forEach(c => c.classList.remove('active', 'jump'));
                document.getElementById(`c - ${ n } `).classList.add('active');
                updateEq();
                setInfo(`Mula pada ${ n }. Pilih butang + untuk melompat.`);
                speak(`Mula nombor ${ n } `);
            }
        }

        window.jump = function (k) {
            if (currentNum === null) { setInfo('Sila pilih nombor mula di papan dahulu.'); return; }

            const next = currentNum + k;
            if (next > 100) { setInfo('Nombor melebihi 100. Cuba nombor lain.'); return; }

            // Visual updates
            const cell = document.getElementById(`c - ${ next } `);
            cell.classList.add('jump');

            // Update logic
            currentNum = next;
            totalAdded += k;

            // Scroll to view if needed
            cell.scrollIntoView({ behavior: "smooth", block: "center" });

            // Keep start active, highlight current path logic could be complex, simple highlight new pos
            setTimeout(() => {
                document.querySelectorAll('.cell-100.active').forEach(c => c.classList.remove('active'));
                cell.classList.add('active');
            }, 100);

            updateEq();
            speak(`Tambah ${ k }, jadi ${ next } `);
        }

        function updateEq() {
            const eq = document.getElementById('eq-display');
            if (startNum === null) { eq.innerText = '---'; return; }
            eq.innerText = `${ startNum } + ${ totalAdded } = ${ currentNum }`;
        }</script>