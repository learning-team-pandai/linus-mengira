<!doctypehtml><html lang="ms-MY"class="overflow-hidden overscroll-none"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>Matematik Ceria: Penambahan (Aktiviti)</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap"rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script><style>body{font-family:Fredoka,sans-serif;background-color:#f0fdf4;background-image:radial-gradient(#86efac 2px,transparent 2px);background-size:30px 30px}.game-card{background:#fff;border:4px solid #475569;box-shadow:8px 8px 0 #00000020;border-radius:1.5rem;position:relative;display:flex;align-items:center;justify-content:center;flex-direction:column;overflow:hidden}.btn-3d{transition:all .1s;border-bottom-width:6px;border-color:rgba(0,0,0,.2);transform:translateY(0);cursor:pointer;display:inline-block}.btn-3d:active:not(:disabled){transform:translateY(4px);border-bottom-width:2px;box-shadow:none}.btn-3d:disabled{opacity:.6;cursor:not-allowed;border-bottom-width:6px;filter:grayscale(100%)}.grid-100{display:grid;grid-template-columns:repeat(10,1fr);gap:2px}.cell-100{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border:1px solid #e2e8f0;border-radius:4px;font-weight:700;font-size:.7rem;cursor:pointer;transition:all .1s}.cell-100:hover{background:#f1f5f9}.cell-100.active{background:#3b82f6;color:#fff;border-color:#1d4ed8;transform:scale(1.1);box-shadow:0 4px 6px -1px rgba(59,130,246,.5);z-index:10}.cell-100.jump{background:#22c55e;color:#fff;animation:popIn .3s}.grid-scroll-container{width:100%;max-height:300px;overflow-y:auto;padding:5px;background:#f8fafc;border-radius:1rem;border:2px solid #e2e8f0}.pupil-cell{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border:3px solid #cbd5e1;border-radius:50%;background:#fff;font-size:1.2rem;transition:all .2s}.pupil-cell.active{border-color:#ef4444;background:#fee2e2;transform:scale(1.2);box-shadow:0 0 15px #ef4444}@keyframes popIn{0%{transform:scale(0)}100%{transform:scale(1)}}</style><body class="h-screen w-screen overflow-hidden text-slate-800 flex flex-col overscroll-none"><div class="flex-none p-4 z-50 pointer-events-none w-full"><div class="max-w-4xl mx-auto bg-green-400 border-4 border-green-600 rounded-full px-6 py-3 shadow-xl flex items-center justify-between pointer-events-auto transform hover:scale-[1.01] transition-transform"><div class="flex items-center gap-3"><span class="text-3xl animate-bounce">üßÆ</span> <span id="info-text"class="text-xl font-bold text-green-900 leading-none mt-1">Matematik Asas</span></div><button id="speak-btn"onclick="speakInfo()"class="bg-white hover:bg-green-50 text-green-600 border-2 border-green-200 rounded-full p-2 transition-colors shadow-sm">üîä</button></div></div><div class="flex-1 w-full max-w-6xl mx-auto p-2 flex flex-col min-h-0"><div class="game-card p-2 mb-2 flex-1 w-full"><div id="activity-content"class="w-full relative z-10 flex flex-col items-center justify-center h-full transition-opacity duration-200"><div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">‚ûï</div><h2 class="text-5xl font-bold text-emerald-600 mb-4">Aktiviti Penambahan</h2><p class="text-xl text-slate-500 mb-8 font-semibold">Kotak Beracun, Masalah Harian & Papan 100.<div class="text-4xl animate-bounce">üëá</div></div></div></div><div class="flex-none bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg p-2 border-2 border-white"><h3 class="text-lg font-bold text-slate-700 mb-1 text-center">üéÆ Pilih Aktiviti</h3><div class="grid grid-cols-5 gap-2 mb-2"><button onclick="loadActivity(1)"class="btn-3d bg-blue-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">üÉè Kad</button> <button onclick="loadActivity(2)"class="btn-3d bg-green-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">üé∂ Muzik</button> <button onclick="loadActivity(3)"class="btn-3d bg-purple-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">ü¶ã Rama</button> <button onclick="loadActivity(4)"class="btn-3d bg-orange-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">üü° Guli</button> <button onclick="loadActivity(5)"class="btn-3d bg-pink-500 text-white font-bold py-2 px-1 rounded-xl text-sm md:text-base">üíØ Grid</button></div><div class="flex justify-center gap-4 border-t-2 border-slate-100 pt-2"><button onclick="clearActivity()"class="btn-3d bg-slate-400 text-white font-bold py-1 px-4 rounded-full text-base">üè† Menu</button> <button onclick="nextActivity()"class="btn-3d bg-indigo-500 text-white font-bold py-1 px-6 rounded-full text-lg">Seterusnya ‚û°Ô∏è</button></div></div></div><script>let currentActivity=0,ttsEnabled=!1,currentInfo="Pilih aktiviti untuk bermula!";function speak(t){var e;ttsEnabled&&"speechSynthesis"in window&&(window.speechSynthesis.cancel(),(t=new SpeechSynthesisUtterance(t)).lang="ms-MY",t.rate=.95,t.pitch=1.05,(e=window.speechSynthesis.getVoices().find(t=>"ms-MY"===t.lang||t.lang?.startsWith("ms")))&&(t.voice=e),window.speechSynthesis.speak(t))}function setInfo(t){currentInfo=t;let e=document.getElementById("info-text");e.style.opacity=0,setTimeout(()=>{e.textContent=t,e.style.opacity=1},200)}function speakInfo(){ttsEnabled||(ttsEnabled=!0,document.getElementById("speak-btn").classList.add("bg-green-100","text-green-600")),speak(currentInfo)}function cryptoRandomId(){return Math.random().toString(36).slice(2,9)}let kbAudioCtx=null,kbMusicGain=null,kbMusicBuffer=null,kbMusicSource=null,kbMusicStartAt=0,kbMusicPausedAt=0;function kbEnsureMusic(){kbAudioCtx||(kbAudioCtx=new(window.AudioContext||window.webkitAudioContext),(kbMusicGain=kbAudioCtx.createGain()).gain.value=.1,kbMusicGain.connect(kbAudioCtx.destination),kbMusicBuffer=kbBuildLoop(kbAudioCtx))}function kbBuildLoop(t){var e=t.sampleRate,t=t.createBuffer(1,Math.floor(2.4*e),e),i=t.getChannelData(0);for(let t=0;t<i.length;t++){var n=t/e,a=Math.floor(n/.4),l=n%.4,d=[440,523.25,659.25,523.25,440,392];i[t]=(l<.15?.85*(1-l/.15):0)*Math.sin(2*Math.PI*d[a%d.length]*n)}return t}function kbStartMusic(){var t;kbEnsureMusic(),kbMusicSource||("suspended"===kbAudioCtx.state&&kbAudioCtx.resume(),(kbMusicSource=kbAudioCtx.createBufferSource()).buffer=kbMusicBuffer,kbMusicSource.loop=!0,kbMusicSource.connect(kbMusicGain),kbMusicStartAt=kbAudioCtx.currentTime,t=kbMusicPausedAt%kbMusicBuffer.duration,kbMusicSource.start(0,t))}function kbPauseMusic(){if(kbAudioCtx&&kbMusicSource){kbMusicPausedAt+=kbAudioCtx.currentTime-kbMusicStartAt;try{kbMusicSource.stop()}catch(t){}kbMusicSource.disconnect(),kbMusicSource=null}}function loadActivity(t){kbPauseMusic(),currentActivity=t;let e=document.getElementById("activity-content");e.style.opacity=0,setTimeout(()=>{1===t?setupAct1(e):2===t?setupAct2(e):3===t?setupAct3(e):4===t?setupAct4(e):5===t&&setupAct5(e),e.style.opacity=1},200)}function clearActivity(){kbPauseMusic(),currentActivity=0,document.getElementById("activity-content").innerHTML='<div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">‚ûï</div><h2 class="text-5xl font-bold text-emerald-600 mb-4">Aktiviti Penambahan</h2><p class="text-2xl text-slate-500 mb-8 font-semibold">Pilih butang di bawah.</p></div>',setInfo("Pilih aktiviti di bawah.")}function nextActivity(){let t=currentActivity+1;loadActivity(t=5<t?1:t)}function setupAct1(t){setInfo("Ambil kad, sebut jumlah, kemudian semak.");var e=Array.from({length:3},()=>{var t=Math.floor(2+8*Math.random()),e=Math.floor(2+8*Math.random());return{a:t,b:e,sum:t+e,id:cryptoRandomId()}});t.innerHTML=`
            <div class="w-full max-w-4xl text-center">
                <h3 class="text-2xl font-bold text-blue-600 mb-2">üÉè Kad Spontan</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                    ${e.map(t=>`
                        <div class="bg-blue-50 border-4 border-blue-200 rounded-2xl p-4 flex flex-col items-center relative">
                            <div class="text-3xl font-black text-blue-800 mb-2">${t.a} + ${t.b}</div>
                            
                            <button onclick="revealA1(this, ${t.a}, ${t.b}, ${t.sum})" class="btn-3d bg-blue-500 text-white px-2 py-1 rounded-xl font-bold text-sm w-full">
                                üëÄ Jawapan
                            </button>
                            
                            <div class="answer-box hidden mt-2 bg-white p-2 rounded-xl border-2 border-blue-100 w-full animate-popIn">
                                <div class="text-2xl font-bold text-blue-600">${t.sum}</div>
                            </div>
                        </div>
                    `).join("")}
                </div>
            </div>
        `}window.revealA1=function(t,e,i,n){t.nextElementSibling.classList.remove("hidden"),t.style.display="none";t=e+` tambah ${i} ialah ${n}.`;setInfo(t),speak(t)};let kbTimer=null,kbRunning=!1,kbAwaitingPick=!1,kbDeck=[];function setupAct2(t){setInfo("Tekan Main Muzik. Tekan Henti untuk pilih murid."),kbDeck=[];for(let t=0;t<12;t++){var e=2+Math.floor(9*Math.random()),i=2+Math.floor(9*Math.random());kbDeck.push({a:e,b:i,sum:e+i,id:cryptoRandomId()})}kbMusicPausedAt=0,kbRunning=!1,kbAwaitingPick=!1;var n=Array.from({length:10},(t,e)=>e%2?"üëß":"üë¶");t.innerHTML=`
            <div class="w-full max-w-3xl text-center">
                <h3 class="text-2xl font-bold text-green-600 mb-2">üé∂ Kotak Beracun</h3>
                
                <div class="bg-green-50 border-2 border-green-200 rounded-3xl p-4 mb-4 relative">
                     <div class="flex items-center justify-center gap-1 flex-wrap mb-2" id="ring">
                        ${n.map((t,e)=>`<div class="pupil-cell" id="p-${e}">${t}</div>`).join("")}
                    </div>
                    
                    <div class="flex justify-center gap-2">
                        <button id="kbPlay" class="btn-3d bg-green-500 text-white px-4 py-2 rounded-xl font-bold text-sm" onclick="kbPlay()">‚ñ∂Ô∏è Muzik</button>
                        <button class="btn-3d bg-red-500 text-white px-4 py-2 rounded-xl font-bold text-sm" onclick="kbStop()">‚èπ Henti</button>
                    </div>
                </div>

                <div id="deck-area" class="bg-white border-2 border-slate-200 rounded-2xl p-4 min-h-[100px]">
                    <div class="flex flex-wrap gap-1 justify-center" id="kbCardList">
                         ${kbDeck.map(t=>`
                          <button id="btn-${t.id}" class="btn-3d bg-slate-100 text-slate-600 px-2 py-1 rounded-lg font-bold text-xs"
                                  onclick="kbShow('${t.id}', ${t.a}, ${t.b}, ${t.sum})">
                            ?
                          </button>`).join("")}
                    </div>
                    <div id="kbResult" class="mt-2 text-xl font-bold text-green-600"></div>
                </div>
            </div>
        `}function setupAct3(t){setInfo("Baca cerita rama-rama.");t.innerHTML=`
            <div class="w-full max-w-4xl text-center">
                <h3 class="text-2xl font-bold text-purple-600 mb-4">ü¶ã Masalah: Haiwan</h3>
                <div class="space-y-4">
                    ${[{left:3,right:4,emoji:"ü¶ã",teks:"3 rama-rama hinggap. 4 lagi datang."},{left:2,right:5,emoji:"üêû",teks:"2 kumbang di daun. 5 lagi sampai."}].map((t,e)=>`
                        <div class="bg-purple-50 border-2 border-purple-200 rounded-2xl p-4">
                            <div class="text-3xl mb-2 tracking-widest">${t.emoji.repeat(t.left)} + ${t.emoji.repeat(t.right)}</div>
                            <p class="text-lg font-bold text-purple-900 mb-2">"${t.teks}"</p>
                            
                            <button onclick="revealStory(this, ${t.left}, ${t.right})" class="btn-3d bg-purple-500 text-white px-4 py-2 rounded-xl font-bold text-sm">
                                Kira Jumlah
                            </button>
                            
                            <div class="hidden mt-2 bg-white p-2 rounded-xl border-2 border-purple-100 animate-popIn">
                                <div class="text-2xl font-bold text-purple-600">${t.left} + ${t.right} = ${t.left+t.right}</div>
                            </div>
                        </div>
                    `).join("")}
                </div>
            </div>
        `}function setupAct4(t){setInfo("Lihat bentuk lazim.");t.innerHTML=`
             <div class="w-full max-w-4xl text-center">
                <h3 class="text-2xl font-bold text-orange-600 mb-4">üü° Masalah Guli</h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${[{nama:"Ali",a:9,b:5},{nama:"Siti",a:7,b:6}].map((t,e)=>`
                        <div class="bg-orange-50 border-2 border-orange-200 rounded-2xl p-4">
                            <p class="text-base font-bold text-orange-900 mb-2 text-left">
                                ${t.nama} ada <span class="text-red-600">${t.a}</span>. 
                                Kawan beri <span class="text-blue-600">${t.b}</span>.
                            </p>
                            
                            <div class="bg-white border-2 border-slate-200 rounded-xl p-4 w-fit mx-auto shadow-inner text-2xl font-mono text-right leading-loose">
                                <div class="text-red-500">${t.a<10?"&nbsp;"+t.a:t.a}</div>
                                <div class="border-b-4 border-slate-800 text-blue-500 relative">
                                    <span class="absolute left-[-20px] text-slate-400 text-lg top-3">+</span>
                                    ${t.b<10?"&nbsp;"+t.b:t.b}
                                </div>
                                <div class="font-black text-orange-600 pt-1 hidden result-${e}">
                                    ${t.a+t.b}
                                </div>
                            </div>
                            
                            <button onclick="revealGuli(${e}, ${t.a}, ${t.b})" class="btn-3d bg-orange-500 text-white px-4 py-2 rounded-xl font-bold mt-4 w-full">
                                Kira
                            </button>
                        </div>
                    `).join("")}
                 </div>
            </div>
        `}window.kbPlay=function(){if(!kbRunning&&!kbAwaitingPick&&0!==kbDeck.length){kbRunning=!0,document.getElementById("kbPlay").disabled=!0,document.getElementById("kbPlay").classList.add("opacity-50");let t=[...document.querySelectorAll(".pupil-cell")],e=0;kbTimer=setInterval(()=>{t.forEach(t=>t.classList.remove("active")),t[e%t.length].classList.add("active"),e++},220),kbStartMusic(),setInfo("Muzik berjalan‚Ä¶ tekan ‚ÄúHenti‚Äù apabila bersedia.")}},window.kbStop=function(){kbRunning&&(clearInterval(kbTimer),kbRunning=!1,kbAwaitingPick=!0,kbPauseMusic(),setInfo("Muzik berhenti! Pilih satu kad dari kotak di bawah."),speak("Pilih satu kad."))},window.kbShow=function(e,t,i,n){var a;kbAwaitingPick?((a=document.getElementById("btn-"+e))&&a.remove(),kbDeck=kbDeck.filter(t=>t.id!==e),document.getElementById("kbCount").innerText=kbDeck.length,document.getElementById("kbResult").innerHTML=`<div class="animate-popIn p-4 bg-green-100 border-2 border-green-400 rounded-xl inline-block shadow-lg text-3xl">${t} + ${i} = ${n}</div>`,setInfo(a=t+` tambah ${i} ialah ${n}.`),speak(a),kbAwaitingPick=!1,document.getElementById("kbPlay").disabled=!1,document.getElementById("kbPlay").classList.remove("opacity-50"),0===kbDeck.length&&setInfo("Tamat! Semua kad telah dipilih.")):setInfo("Tekan ‚ÄúHenti‚Äù dahulu sebelum pilih kad.")},window.revealStory=function(t,e,i){t.nextElementSibling.classList.remove("hidden"),t.style.display="none",speak(`Jumlahnya ${e+i} ekor.`)},window.revealGuli=function(t,e,i){document.querySelector(".result-"+t).classList.remove("hidden"),speak(e+` tambah ${i} ialah ${e+i}.`)};let startNum=null,currentNum=null,totalAdded=0;function setupAct5(t){setInfo("Pilih nombor mula di papan."),startNum=null,currentNum=null,totalAdded=0;let e="";for(let t=1;t<=100;t++)e+=`<div class="cell-100" id="c-${t}" onclick="click100(${t})">${t}</div>`;t.innerHTML=`
             <div class="w-full max-w-5xl text-center">
                <h3 class="text-2xl font-bold text-pink-600 mb-2">üíØ Papan 100</h3>
                
                <div class="grid md:grid-cols-3 gap-4 items-start">
                    <div class="md:col-span-2">
                        <div class="grid-scroll-container shadow-inner">
                            <div class="grid-100">${e}</div>
                        </div>
                    </div>
                    
                    <div class="bg-pink-50 border-4 border-pink-200 rounded-2xl p-4 flex flex-col gap-2 sticky top-0">
                        <div class="text-lg font-bold text-pink-800 mb-1">Kawalan</div>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="jump(1)" class="btn-3d bg-white border-pink-200 text-pink-600 font-bold py-1 px-2 rounded-lg text-sm">+1</button>
                            <button onclick="jump(2)" class="btn-3d bg-white border-pink-200 text-pink-600 font-bold py-1 px-2 rounded-lg text-sm">+2</button>
                            <button onclick="jump(5)" class="btn-3d bg-white border-pink-200 text-pink-600 font-bold py-1 px-2 rounded-lg text-sm">+5</button>
                            <button onclick="jump(10)" class="btn-3d bg-white border-pink-200 text-pink-600 font-bold py-1 px-2 rounded-lg text-sm">+10</button>
                        </div>
                        
                        <div class="mt-2 p-2 bg-white rounded-xl border-2 border-pink-100">
                            <div class="text-xs text-slate-400 font-bold">Ayat Matematik:</div>
                            <div id="eq-display" class="text-xl font-bold text-slate-700 min-h-[30px] flex items-center justify-center">---</div>
                        </div>

                        <button onclick="setupAct5(document.getElementById('activity-content'))" class="btn-3d bg-slate-400 text-white font-bold py-1 rounded-lg mt-1 text-sm">Reset</button>
                    </div>
                </div>
            </div>
        `}function updateEq(){var t=document.getElementById("eq-display");null===startNum?t.innerText="---":t.innerText=`${startNum} + ${totalAdded} = `+currentNum}window.click100=function(t){null===startNum&&(startNum=t,currentNum=t,totalAdded=0,document.querySelectorAll(".cell-100").forEach(t=>t.classList.remove("active","jump")),document.getElementById("c-"+t).classList.add("active"),updateEq(),setInfo(`Mula pada ${t}. Pilih butang + untuk melompat.`),speak("Mula nombor "+t))},window.jump=function(e){if(null===currentNum)setInfo("Sila pilih nombor mula di papan dahulu.");else{var i=currentNum+e;if(100<i)setInfo("Nombor melebihi 100. Cuba nombor lain.");else{let t=document.getElementById("c-"+i);t.classList.add("jump"),currentNum=i,totalAdded+=e,t.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{document.querySelectorAll(".cell-100.active").forEach(t=>t.classList.remove("active")),t.classList.add("active")},100),updateEq(),speak(`Tambah ${e}, jadi `+i)}}}</script>