<!doctypehtml><html lang="ms-MY"class="overflow-hidden overscroll-none"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Matematik Ceria: Eksplorasi Tolak</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap"rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script><style>body{font-family:Fredoka,sans-serif;background-color:#f0fdf4;background-image:radial-gradient(#86efac 2px,transparent 2px);background-size:30px 30px}.game-card{background:#fff;border:4px solid #475569;box-shadow:8px 8px 0 #00000020;border-radius:1.5rem;position:relative;display:flex;align-items:center;justify-content:center;flex-direction:column}.btn-3d{transition:all .1s;border-bottom-width:6px;border-color:rgba(0,0,0,.2);transform:translateY(0);cursor:pointer;display:inline-block}.btn-3d:active:not(:disabled){transform:translateY(4px);border-bottom-width:2px;box-shadow:none}.btn-3d:disabled{opacity:.6;cursor:not-allowed;border-bottom-width:6px;filter:grayscale(100%)}.pulse{animation:pulse 1.2s ease infinite}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}.tile{transition:.2s;font-weight:700;color:#334155;height:100%;width:100%;display:flex;align-items:center;justify-content:center}.tile:hover{transform:translateY(-2px);background-color:#e2e8f0}.trail{background:#dbeafe!important;border-color:#93c5fd!important;color:#1e40af}.here{background:#bbf7d0!important;border-color:#22c55e!important;font-weight:800;transform:scale(1.1);border-width:3px;z-index:10}.rod{width:20px;height:100px;border-radius:4px;border:2px solid #7c3aed;background-color:#c4b5fd}.unit{width:20px;height:20px;border-radius:50%;border:2px solid #7c3aed;background-color:#ddd6fe}.colcell{width:60px;height:50px;display:flex;align-items:center;justify-content:center;border-radius:.75rem;border:2px solid #cbd5e1;background:#f8fafc;font-weight:700;font-size:1.5rem;color:#334155}.hl{outline:4px solid #f59e0b;background:#fff7ed!important;transform:scale(1.05);z-index:10;transition:all .3s}.story-obj{width:50px;height:50px;display:inline-flex;align-items:center;justify-content:center;border-radius:12px;background:#fff;border:2px solid #e5e7eb;font-size:1.8rem;cursor:pointer;transition:all .2s}.story-obj:hover{border-color:#f43f5e;background-color:#fff1f2}</style><body class="h-screen w-screen overflow-hidden text-slate-800 flex flex-col overscroll-none"><div class="flex-none p-4 z-50 pointer-events-none w-full"><div class="max-w-4xl mx-auto bg-green-400 border-4 border-green-600 rounded-full px-4 py-2 shadow-xl flex items-center justify-between pointer-events-auto transform hover:scale-[1.01] transition-transform"><div class="flex items-center gap-3"><span class="text-2xl animate-bounce">â–</span> <span id="info-text"class="text-lg font-bold text-green-900 leading-none mt-1">Eksplorasi Operasi Tolak</span></div><button id="speak-btn"onclick="speakInfo()"class="bg-white hover:bg-green-50 text-green-600 border-2 border-green-200 rounded-full p-2 transition-colors shadow-sm">ğŸ”Š</button></div></div><div class="flex-1 w-full max-w-5xl mx-auto p-2 flex flex-col min-h-0"><div class="game-card p-4 mb-2 flex-1 w-full"><div id="activity-content"class="w-full relative z-10 flex flex-col items-center justify-center h-full transition-opacity duration-200"><div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">ğŸ”</div><h2 class="text-4xl md:text-5xl font-bold text-emerald-600 mb-4">Eksplorasi Tolak</h2><p class="text-lg text-slate-500 mb-8 font-semibold">Belajar konsep tanpa tekanan kuiz.<div class="text-4xl animate-bounce">ğŸ‘‡</div></div></div></div><div class="flex-none bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg p-2 border-2 border-white"><h3 class="text-lg font-bold text-slate-700 mb-1 text-center">ğŸ® Pilih Aktiviti</h3><div class="grid grid-cols-5 gap-2 mb-2"><button onclick="loadActivity(1)"class="btn-3d bg-blue-500 text-white font-bold py-2 rounded-xl text-xs">ğŸ“<br>Garis</button> <button onclick="loadActivity(2)"class="btn-3d bg-emerald-500 text-white font-bold py-2 rounded-xl text-xs">ğŸŸ¦<br>Petak</button> <button onclick="loadActivity(3)"class="btn-3d bg-purple-500 text-white font-bold py-2 rounded-xl text-xs">ğŸ”Ÿ<br>Puluh</button> <button onclick="loadActivity(4)"class="btn-3d bg-orange-500 text-white font-bold py-2 rounded-xl text-xs">ğŸ§®<br>Lazim</button> <button onclick="loadActivity(5)"class="btn-3d bg-rose-500 text-white font-bold py-2 rounded-xl text-xs">ğŸï¸<br>Cerita</button></div><div class="flex justify-center gap-4 border-t-2 border-slate-100 pt-2"><button onclick="clearActivity()"class="btn-3d bg-slate-400 text-white font-bold py-1 px-4 rounded-full text-base">ğŸ  Menu</button> <button onclick="nextActivity()"class="btn-3d bg-indigo-500 text-white font-bold py-1 px-6 rounded-full text-lg">Seterusnya â¡ï¸</button></div></div></div><script>let currentActivity=0,ttsEnabled=!1,currentInfo="Pilih aktiviti untuk mula.";function speak(e){var t;ttsEnabled&&"speechSynthesis"in window&&(window.speechSynthesis.cancel(),(e=new SpeechSynthesisUtterance(e)).lang="ms-MY",e.rate=.95,e.pitch=1.05,(t=window.speechSynthesis.getVoices().find(e=>"ms-MY"===e.lang||e.lang?.startsWith("ms")))&&(e.voice=t),window.speechSynthesis.speak(e))}function setInfo(e){currentInfo=e;let t=document.getElementById("info-text");t.style.opacity=0,setTimeout(()=>{t.textContent=e,t.style.opacity=1},200)}function speakInfo(){ttsEnabled||(ttsEnabled=!0,document.getElementById("speak-btn").classList.add("bg-green-100","text-green-600")),speak(currentInfo)}let R=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function loadActivity(e){currentActivity=e;let t=document.getElementById("activity-content");t.style.opacity=0,setTimeout(()=>{1===e&&loadNumberLine(t),2===e&&loadHundredsGrid(t),3===e&&loadBaseTen(t),4===e&&loadColumnDemo(t),5===e&&loadStory(t),t.style.opacity=1},200)}function clearActivity(){currentActivity=0,document.getElementById("activity-content").innerHTML='<div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">ğŸ”</div><h2 class="text-5xl font-bold text-emerald-600 mb-4">Eksplorasi Tolak</h2><p class="text-2xl text-slate-500 mb-8 font-semibold">Belajar konsep tanpa tekanan kuiz.</p><div class="text-4xl animate-bounce">ğŸ‘‡</div></div>',setInfo("Pilih aktiviti untuk mula!")}function nextActivity(){let e=currentActivity+1;loadActivity(e=5<e?1:e)}function loadNumberLine(e){let l=R(20,90),n=l;setInfo("Gerakkan penanda. Guna -1 atau -10 untuk tolak.");var t=Array.from({length:11},(e,t)=>l-50+10*t);e.innerHTML=`
        <div class="w-full max-w-3xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-blue-500 mb-2 flex-none">ğŸ“ Garis Nombor</h3>
            <div class="bg-blue-50 border-2 border-blue-200 rounded-2xl p-4 flex-1 flex flex-col min-h-0 w-full justify-center">
               <div class="relative h-20 mb-4 flex-none">
                  <div class="absolute left-0 right-0 top-1/2 -translate-y-1/2 h-2 bg-blue-200 rounded-full"></div>
                  <div id="ticks" class="absolute left-0 right-0 top-1/2 -translate-y-1/2 flex justify-between">
                     ${t.map(e=>`<div class="flex flex-col items-center"><div class="w-[2px] h-4 bg-blue-400"></div><div class="text-[10px] font-bold text-slate-500 mt-1">${e}</div></div>`).join("")}
                  </div>
                  <div id="runner" class="absolute -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2 transition-all duration-300">
                     <div class="w-10 h-10 rounded-full bg-green-500 border-4 border-white shadow-xl flex items-center justify-center text-white font-black pulse text-sm">${n}</div>
                  </div>
               </div>
    
               <input id="nl-range" type="range" min="0" max="100" value="${l}" class="w-full mb-6 h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer flex-none">
               
               <div class="flex flex-wrap gap-2 justify-center mb-2 flex-none">
                  <button class="btn-3d bg-blue-600 text-white px-4 py-2 rounded-xl font-bold" onclick="stepNL(-1)">âˆ’1</button>
                  <button class="btn-3d bg-blue-600 text-white px-4 py-2 rounded-xl font-bold" onclick="stepNL(-10)">âˆ’10</button>
                  <button class="btn-3d bg-slate-500 text-white px-4 py-2 rounded-xl font-bold" onclick="resetNL()">Reset</button>
               </div>
               <div class="text-center text-slate-500 font-bold text-lg flex-none">Kedudukan: <span id="nl-pos" class="text-blue-600">${n}</span></div>
            </div>
        </div>`;let o=document.getElementById("runner");e=document.getElementById("nl-range");let a=document.getElementById("nl-pos");function d(){var e=n/100*100;o.style.left=e+"%",o.querySelector("div").textContent=n,a.textContent=n}window.stepNL=e=>{var t=n;n=Math.max(0,Math.min(100,n+e)),d(),speak(`${t} tolak ${Math.abs(e)} jadi `+n)},window.resetNL=()=>{n=l,d(),speak("Kembali ke mula.")},e.addEventListener("input",e=>{n=+e.target.value,d()}),d()}function loadHundredsGrid(e){let t=R(21,100),n=t;function o(e,t){e=document.getElementById("cell-"+e);let l=document.getElementById("cell-"+t);e&&e.classList.add("trail"),l&&(l.classList.add("here"),setTimeout(()=>l.classList.remove("here"),700))}setInfo("Klik petak mula, kemudian tolak 1 (kiri) atau tolak 10 (atas)."),e.innerHTML=`
        <div class="w-full max-w-5xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-emerald-500 mb-1 flex-none">ğŸŸ¦ Petak 100</h3>
            <div class="flex-1 flex flex-col md:flex-row gap-2 min-h-0 w-full overflow-hidden">
               <div class="flex-1 bg-white rounded-xl p-1 border-2 border-slate-200 shadow-sm flex flex-col min-h-0">
                  <div class="grid grid-cols-10 gap-0.5 h-full auto-rows-fr">
                     ${Array.from({length:100},(e,t)=>t+1).map(e=>`<button id="cell-${e}" class="tile border rounded text-[10px] ${e<=t?"bg-blue-50 border-blue-100":"bg-white border-slate-100"}" onclick="jumpTo(${e})">${e}</button>`).join("")}
                  </div>
               </div>
               <div class="w-full md:w-56 bg-white border-2 border-emerald-100 rounded-2xl p-2 flex-none md:overflow-y-auto">
                  <div class="text-center mb-2">
                     <div class="text-xs font-bold text-slate-400 uppercase">Kira-kira</div>
                     <div class="text-xl font-black text-emerald-600"><span id="p100-a">${t}</span> âˆ’ <span id="p100-b">1</span> = <span id="p100-c">${t-1}</span></div>
                  </div>
                  <div class="flex flex-row md:flex-col gap-2 justify-center">
                     <button class="btn-3d bg-emerald-500 text-white py-2 px-2 rounded-lg text-sm font-bold flex-1" onclick="moveGrid(-1)">â¬…ï¸ -1</button>
                     <button class="btn-3d bg-emerald-500 text-white py-2 px-2 rounded-lg text-sm font-bold flex-1" onclick="moveGrid(-10)">â¬†ï¸ -10</button>
                     <button class="btn-3d bg-slate-400 text-white py-2 px-2 rounded-lg text-sm font-bold flex-1" onclick="resetGrid()">ğŸ”„ Reset</button>
                  </div>
               </div>
            </div>
        </div>`,window.moveGrid=e=>{var t=n,l=Math.max(1,Math.min(100,n+e));o(t,n=l),document.getElementById("p100-a").textContent=t,document.getElementById("p100-b").textContent=Math.abs(e),document.getElementById("p100-c").textContent=l,speak(`${t} tolak ${Math.abs(e)} jadi `+l)},window.resetGrid=()=>{document.querySelectorAll('[id^="cell-"]').forEach(e=>e.classList.remove("trail","here")),o(n=t,t)},window.jumpTo=e=>{t=e,n=e,resetGrid()},o(t,t)}function loadBaseTen(e){let t=R(1,9),l=R(0,9);10*t+l<12&&(t=3,l=4);var n=10*t+l;let o=n;setInfo("Keluarkan blok untuk menolak."),e.innerHTML=`
        <div class="w-full max-w-5xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-purple-500 mb-2 flex-none">ğŸ”Ÿ Puluh & Sa</h3>
            <div class="flex-1 flex flex-col md:flex-row gap-4 min-h-0 w-full">
               <div class="flex-1 bg-purple-50 border-2 border-purple-200 rounded-2xl p-4 relative overflow-y-auto">
                  <div class="absolute top-2 left-2 text-xs font-bold text-purple-400 uppercase">Papan Kerja</div>
                  <div class="flex flex-wrap gap-2 items-end mt-6 justify-center" id="bt-visual">
                     ${Array.from({length:t},()=>'<div class="rod"></div>').join("")}
                     ${Array.from({length:l},()=>'<div class="unit"></div>').join("")}
                  </div>
               </div>
               <div class="w-full md:w-64 flex flex-col gap-2 flex-none overflow-y-auto">
                  <div class="bg-white p-2 rounded-2xl border-2 border-slate-200 text-center flex-none">
                     <div class="text-xs font-bold text-slate-400 uppercase">Baki Semasa</div>
                     <div class="text-4xl font-black text-purple-600" id="bt-c">${n}</div>
                  </div>
                  <button class="btn-3d bg-purple-600 text-white py-2 rounded-xl text-lg font-bold flex-none" onclick="btTake(1)">â– Buang 1</button>
                  <button class="btn-3d bg-purple-600 text-white py-2 rounded-xl text-lg font-bold flex-none" onclick="btTake(10)">â– Buang 10</button>
                  <button class="btn-3d bg-slate-400 text-white py-2 rounded-xl text-lg font-bold flex-none" onclick="btReset()">ğŸ”„ Mula Semula</button>
               </div>
            </div>
        </div>`,window.btTake=e=>{var t=document.getElementById("bt-visual");let l=0;if(1===e&&t.querySelector(".unit"))t.querySelector(".unit").remove(),l=1;else{if(10!==e||!t.querySelector(".rod"))return void speak("Tiada lagi blok.");t.querySelector(".rod").remove(),l=10}o-=l,document.getElementById("bt-c").textContent=o,speak(`Buang ${l}, tinggal `+o)},window.btReset=()=>loadBaseTen(e)}function loadColumnDemo(e){let t,l;for(;t=R(20,99),l=R(10,t-1),t%10<l%10;);let o=Math.floor(t/10),a=t%10,d=Math.floor(l/10),s=l%10,i=t-l;setInfo("Tekan 'Tunjuk Langkah' untuk lihat cara tolak ikut lajur."),e.innerHTML=`
        <div class="w-full max-w-4xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-orange-500 mb-2 flex-none">ğŸ§® Bentuk Lazim</h3>
            <div class="flex-1 flex flex-col md:flex-row justify-center gap-4 items-center min-h-0 w-full overflow-y-auto">
               <div class="bg-white border-2 border-orange-200 rounded-2xl p-4 shadow-lg flex-none">
                  <div class="grid grid-cols-2 gap-2 text-center">
                     <div class="text-xs text-slate-400 font-bold uppercase">Puluh</div><div class="text-xs text-slate-400 font-bold uppercase">Sa</div>
                     <div id="cd-tA" class="colcell text-orange-800 bg-orange-50">${o}</div><div id="cd-oA" class="colcell text-orange-800 bg-orange-50">${a}</div>
                     <div class="col-span-2 h-1 bg-slate-200 my-0.5"></div>
                     <div id="cd-tB" class="colcell text-slate-500">-${d}</div><div id="cd-oB" class="colcell text-slate-500">-${s}</div>
                     <div class="col-span-2 h-1 bg-slate-800 my-0.5"></div>
                     <div id="cd-tR" class="colcell border-orange-300 text-orange-600">?</div><div id="cd-oR" class="colcell border-orange-300 text-orange-600">?</div>
                  </div>
               </div>
               <div class="bg-white border-2 border-slate-100 rounded-2xl p-4 max-w-xs flex-none">
                  <div class="text-base font-bold text-slate-700 mb-2">Langkah:</div>
                  <ol class="list-decimal list-inside text-slate-600 space-y-1 font-medium text-sm text-left" id="cd-steps">
                     <li>Mula dari <b>SA</b>. (${a} - ${s})</li>
                     <li>Tulis jawapan Sa.</li>
                     <li>Pergi ke <b>PULUH</b>. (${o} - ${d})</li>
                     <li>Tulis jawapan Puluh.</li>
                  </ol>
                  <div class="flex flex-col gap-2 mt-4">
                     <button class="btn-3d bg-orange-500 text-white py-2 rounded-xl font-bold text-base" onclick="cdPlay()">â–¶ï¸ Tunjuk</button>
                     <button class="btn-3d bg-slate-400 text-white py-2 rounded-xl font-bold text-base" onclick="loadColumnDemo(document.getElementById('activity-content'))">ğŸ”„ Baru</button>
                  </div>
               </div>
            </div>
        </div>`,window.cdPlay=async()=>{var e=t=>new Promise(e=>setTimeout(e,t)),t=a-s,l=o-d;let n=["oA","oB","oR","tA","tB","tR"].map(e=>document.getElementById("cd-"+e));n[0].classList.add("hl"),n[1].classList.add("hl"),speak("Mula sa. Tolak unit."),await e(1e3),n[2].textContent=t,n[2].classList.add("hl"),await e(1e3),[0,1,2].forEach(e=>n[e].classList.remove("hl")),n[3].classList.add("hl"),n[4].classList.add("hl"),speak("Kemudian puluh."),await e(1e3),n[5].textContent=l,n[5].classList.add("hl"),await e(1e3),[3,4,5].forEach(e=>n[e].classList.remove("hl")),speak("Siap! Jawapan ialah "+i)}}function loadStory(e){var t=[{icon:"ğŸ",n:"Epal"},{icon:"ğŸ",n:"Kumbang"},{icon:"ğŸˆ",n:"Belon"},{icon:"ğŸª",n:"Biskut"}];let l=t[R(0,3)],n=R(6,12),o=n;function a(e){document.getElementById("st-sent").innerHTML=`Ada <b>${n}</b> ${l.n}. Kita buang <b>${e}</b>. Tinggal <b>${o}</b>.`,document.getElementById("st-eq").textContent=n+` - ${e} = `+o}setInfo("Pilih objek, dan klik 'Hilangkan' untuk melihat cerita tolak."),e.innerHTML=`
        <div class="w-full max-w-5xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-rose-500 mb-2 flex-none">ğŸï¸ Cerita Bergambar</h3>
            <div class="flex-1 flex flex-col md:flex-row gap-4 min-h-0 w-full overflow-hidden">
               <div class="flex-1 flex flex-col min-h-0">
                  <div class="flex gap-2 mb-2 justify-center flex-none">
                     ${t.map(e=>`<button class="btn-3d bg-white border-2 border-rose-100 p-1 text-2xl rounded-lg" onclick="chooseStory('${e.icon}','${e.n}')">${e.icon}</button>`).join("")}
                  </div>
                  <div id="st-canvas" class="bg-white border-2 border-rose-200 rounded-2xl p-2 flex-1 overflow-y-auto flex flex-wrap gap-2 content-start">
                     ${Array.from({length:n},()=>`<div class="story-obj animate-[pop_0.3s]">${l.icon}</div>`).join("")}
                  </div>
                  <div class="flex gap-2 justify-center mt-2 flex-none">
                     <button class="btn-3d bg-rose-500 text-white px-3 py-2 rounded-xl font-bold text-sm" onclick="stRemove(1)">Buang 1</button>
                     <button class="btn-3d bg-rose-500 text-white px-3 py-2 rounded-xl font-bold text-sm" onclick="stRemove(2)">Buang 2</button>
                     <button class="btn-3d bg-slate-400 text-white px-3 py-2 rounded-xl font-bold text-sm" onclick="stReset()">Reset</button>
                  </div>
               </div>
               <div class="w-full md:w-64 bg-rose-50 border-2 border-rose-200 rounded-2xl p-4 flex-none overflow-y-auto">
                  <h4 class="text-sm font-bold text-rose-800 mb-2 uppercase">Ayat Cerita</h4>
                  <p id="st-sent" class="text-base text-slate-700 leading-relaxed mb-4">
                     Ada <b class="text-rose-600">${n}</b> ${l.n}. Kita belum buang apa-apa.
                  </p>
                  <div class="bg-white p-2 rounded-xl border-2 border-rose-100 text-center">
                     <div class="text-xs text-slate-400 font-bold uppercase mb-1">Ayat Matematik</div>
                     <div id="st-eq" class="text-xl font-black text-slate-800">${n} - 0 = ${o}</div>
                  </div>
               </div>
            </div>
        </div>`,window.chooseStory=(e,t)=>{l={icon:e,n:t},stReset()},window.stReset=()=>{n=R(6,12),o=n,document.getElementById("st-canvas").innerHTML=Array.from({length:n},()=>`<div class="story-obj animate-[pop_0.3s]">${l.icon}</div>`).join(""),a(0)},window.stRemove=t=>{var l=document.getElementById("st-canvas");for(let e=0;e<t;e++)l.firstElementChild&&l.firstElementChild.remove();o=Math.max(0,o-t),a(n-o),speak(`Buang ${t}, tinggal `+o)}}</script>