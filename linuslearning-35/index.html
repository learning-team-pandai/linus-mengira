<!doctypehtml><html lang="ms-MY"class="overflow-hidden overscroll-none"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Matematik Ceria: Operasi Tolak (Situasi Harian)</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap"rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script><style>body{font-family:Fredoka,sans-serif;background-color:#f0fdf4;background-image:radial-gradient(#86efac 2px,transparent 2px);background-size:30px 30px}.game-card{background:#fff;border:4px solid #475569;box-shadow:8px 8px 0 #00000020;border-radius:1.5rem;position:relative;display:flex;align-items:center;justify-content:center;flex-direction:column}.btn-3d{transition:all .1s;border-bottom-width:6px;border-color:rgba(0,0,0,.2);transform:translateY(0);cursor:pointer;display:inline-block}.btn-3d:active:not(:disabled){transform:translateY(4px);border-bottom-width:2px;box-shadow:none}.btn-3d:disabled{opacity:.6;cursor:not-allowed;border-bottom-width:6px;filter:grayscale(100%)}.shake{animation:shake .4s ease-in-out;border-color:#ef4444!important;background-color:#fee2e2!important}@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px) rotate(-5deg)}75%{transform:translateX(8px) rotate(5deg)}}.drop-zone{border:3px dashed #94a3b8;background-color:#f8fafc;transition:all .3s ease;border-radius:.75rem;min-width:70px;min-height:50px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;color:#334155}.drop-zone.drag-over{border-color:#3b82f6;background-color:#dbeafe;transform:scale(1.05)}.drop-zone.filled{border:3px solid #22c55e;background-color:#dcfce7;color:#15803d}.draggable-item{cursor:grab;user-select:none;touch-action:none}.draggable-item:active{cursor:grabbing;opacity:.5;transform:scale(1.1)}.obj-bundle{background-color:#fbbf24;border:3px solid #f59e0b;width:40px;height:60px;border-radius:8px;display:inline-flex;align-items:center;justify-content:center;font-size:1.2rem;font-weight:700;color:#92400e;cursor:pointer;margin:2px;box-shadow:2px 2px 0 rgba(0,0,0,.1);transition:transform .1s}.obj-bundle:hover{transform:scale(1.05)}.obj-single{background-color:#34d399;border:3px solid #059669;width:30px;height:30px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:700;color:#064e3b;cursor:grab;margin:2px}.lazim-table{width:100%;border-collapse:collapse;font-size:1.5rem;font-weight:700;text-align:center;color:#334155}.lazim-table td{padding:5px;position:relative}.col-pu{border-right:3px solid #cbd5e1}.row-line td{border-top:4px solid #475569}.strike{text-decoration:line-through;color:#ef4444;opacity:.6}.borrow-new{position:absolute;top:-10px;left:50%;transform:translateX(-50%);font-size:1rem;color:#22c55e;background:#dcfce7;padding:1px 4px;border-radius:4px;border:1px solid #22c55e;z-index:10}</style><body class="h-screen w-screen overflow-hidden text-slate-800 flex flex-col overscroll-none"><div class="flex-none p-4 z-50 pointer-events-none w-full"><div class="max-w-4xl mx-auto bg-green-400 border-4 border-green-600 rounded-full px-4 py-2 shadow-xl flex items-center justify-between pointer-events-auto transform hover:scale-[1.01] transition-transform"><div class="flex items-center gap-3"><span class="text-2xl animate-bounce">ü•≠</span> <span id="info-text"class="text-lg font-bold text-green-900 leading-none mt-1">Operasi Tolak (Situasi Harian)</span></div><button id="speak-btn"onclick="speakInfo()"class="bg-white hover:bg-green-50 text-green-600 border-2 border-green-200 rounded-full p-2 transition-colors shadow-sm">üîä</button></div></div><div class="flex-1 w-full max-w-5xl mx-auto p-2 flex flex-col min-h-0"><div class="game-card p-4 mb-2 flex-1 w-full"><div id="activity-content"class="w-full relative z-10 flex flex-col items-center justify-center h-full transition-opacity duration-200"><div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">üìñ</div><h2 class="text-4xl md:text-5xl font-bold text-emerald-600 mb-4">Situasi Harian</h2><p class="text-lg text-slate-500 mb-8 font-semibold">Fahamkan konsep tolak melalui cerita.<div class="text-4xl animate-bounce">üëá</div></div></div></div><div class="flex-none bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg p-2 border-2 border-white"><h3 class="text-lg font-bold text-slate-700 mb-1 text-center">üéÆ Pilih Aktiviti</h3><div class="grid grid-cols-5 gap-2 mb-2"><button onclick="loadActivity(1)"class="btn-3d bg-blue-500 text-white font-bold py-2 rounded-xl text-xs">üéØ<br>Faham</button> <button onclick="loadActivity(2)"class="btn-3d bg-green-500 text-white font-bold py-2 rounded-xl text-xs">üçé<br>Mudah</button> <button onclick="loadActivity(3)"class="btn-3d bg-purple-500 text-white font-bold py-2 rounded-xl text-xs">ü•≠<br>Pinjam</button> <button onclick="loadActivity(4)"class="btn-3d bg-orange-500 text-white font-bold py-2 rounded-xl text-xs">üîó<br>Abstrak</button> <button onclick="loadActivity(5)"class="btn-3d bg-rose-500 text-white font-bold py-2 rounded-xl text-xs">‚úçÔ∏è<br>Bina</button></div><div class="flex justify-center gap-4 border-t-2 border-slate-100 pt-2"><button onclick="clearActivity()"class="btn-3d bg-slate-400 text-white font-bold py-1 px-4 rounded-full text-base">üè† Menu</button> <button onclick="nextActivity()"class="btn-3d bg-indigo-500 text-white font-bold py-1 px-6 rounded-full text-lg">Seterusnya ‚û°Ô∏è</button></div></div></div><script>let currentActivity=0,ttsEnabled=!1,currentInfo="Pilih aktiviti untuk mula!",draggedElement=null;function triggerWin(){confetti({particleCount:150,spread:80,origin:{y:.6}})}function speak(e){var t;ttsEnabled&&"speechSynthesis"in window&&(window.speechSynthesis.cancel(),(e=new SpeechSynthesisUtterance(e)).lang="ms-MY",e.rate=.95,e.pitch=1.05,(t=window.speechSynthesis.getVoices().find(e=>"ms-MY"===e.lang||e.lang?.startsWith("ms")))&&(e.voice=t),window.speechSynthesis.speak(e))}function setInfo(e){currentInfo=e;let t=document.getElementById("info-text");t.style.opacity=0,setTimeout(()=>{t.textContent=e,t.style.opacity=1},200)}function speakInfo(){ttsEnabled||(ttsEnabled=!0,document.getElementById("speak-btn").classList.add("bg-green-100","text-green-600")),speak(currentInfo)}function loadActivity(e){currentActivity=e;let t=document.getElementById("activity-content");t.style.opacity=0,setTimeout(()=>{1===e&&loadStoryComprehension(t),2===e&&loadSimpleSubtraction(t),3===e&&loadRegroupSubtraction(t),4===e&&loadAbstractLink(t),5===e&&loadStoryBuilder(t),t.style.opacity=1},200)}function clearActivity(){currentActivity=0,document.getElementById("activity-content").innerHTML='<div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">üìñ</div><h2 class="text-5xl font-bold text-emerald-600 mb-4">Situasi Harian</h2><p class="text-2xl text-slate-500 mb-8 font-semibold">Operasi Tolak dalam Kehidupan Sebenar</p></div>',setInfo("Pilih aktiviti untuk mula!")}function nextActivity(){let e=currentActivity+1;loadActivity(e=5<e?1:e)}function loadStoryComprehension(e){setInfo("Baca cerita. Seret nombor ke kotak yang betul."),e.innerHTML=`
        <div class="w-full max-w-4xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-blue-500 mb-2 flex-none">üéØ Fahamkan Cerita</h3>
            <div class="bg-blue-50 border-2 border-blue-200 rounded-2xl p-4 flex-1 flex flex-col min-h-0 w-full overflow-y-auto">
               <p class="text-base text-slate-700 leading-normal mb-4 text-center flex-none">
                  "Di atas pokok mangga ada <strong class="text-blue-600">24</strong> biji buah. 
                  <strong class="text-rose-500">15</strong> biji masih hijau. Berapa yang masak?"
               </p>
               
               <div class="flex justify-center gap-4 mb-4 flex-none">
                  <div class="btn-3d bg-white border-blue-300 text-blue-800 rounded-xl p-2 text-xl font-bold draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-number="24">24</div>
                  <div class="btn-3d bg-white border-blue-300 text-blue-800 rounded-xl p-2 text-xl font-bold draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-number="15">15</div>
                  <div class="btn-3d bg-white border-blue-300 text-blue-800 rounded-xl p-2 text-xl font-bold draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-number="9">9</div>
               </div>
    
               <div class="grid grid-cols-3 gap-2 flex-1">
                  <div class="bg-white p-2 rounded-xl border-2 border-slate-100 text-center flex flex-col items-center">
                     <div class="text-xs font-bold text-slate-400 uppercase mb-1">Jumlah Semua</div>
                     <div class="drop-zone w-full h-16 text-2xl" ondrop="dropOnStoryBox(event, '24')" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">...</div>
                  </div>
                  <div class="bg-white p-2 rounded-xl border-2 border-slate-100 text-center flex flex-col items-center">
                     <div class="text-xs font-bold text-slate-400 uppercase mb-1">Mangga Hijau</div>
                     <div class="drop-zone w-full h-16 text-2xl" ondrop="dropOnStoryBox(event, '15')" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">...</div>
                  </div>
                  <div class="bg-white p-2 rounded-xl border-2 border-slate-100 text-center flex flex-col items-center">
                     <div class="text-xs font-bold text-slate-400 uppercase mb-1">Mangga Masak</div>
                     <div class="drop-zone w-full h-16 text-2xl" ondrop="dropOnStoryBox(event, '9')" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">...</div>
                  </div>
               </div>
            </div>
        </div>`}function loadSimpleSubtraction(e){setInfo("Seret 3 biji epal ke dalam bakul."),window.subtractionGames.activity2={count:0,target:3},e.innerHTML=`
        <div class="w-full max-w-3xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-green-500 mb-2 flex-none">üçé Tolak Mudah: 24 - 3</h3>
            <div class="flex flex-col items-center flex-1 min-h-0 w-full overflow-y-auto">
               <div class="bg-gray-100 p-2 rounded-2xl mb-4 flex flex-wrap gap-2 justify-center items-end min-h-[80px] w-full max-w-2xl flex-none">
                  <div class="obj-bundle">10</div><div class="obj-bundle">10</div>
                  <div class="obj-single draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-type="sa">1</div>
                  <div class="obj-single draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-type="sa">1</div>
                  <div class="obj-single draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-type="sa">1</div>
                  <div class="obj-single draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-type="sa">1</div>
               </div>
               
               <div class="drop-zone w-36 h-36 rounded-full border-4 border-green-300 flex flex-wrap justify-center items-center p-2 flex-none" 
                    id="basket-zone" ondrop="dropOnBasket(event, 2)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                    <span class="text-green-300 font-bold text-lg pointer-events-none">BAKUL</span>
               </div>
            </div>
        </div>`}function loadRegroupSubtraction(e){setInfo("Tolak 24 - 15. Pecahkan ikatan 10 jika perlu."),window.subtractionGames.activity3={count:0,target:15,bundles:2},e.innerHTML=`
        <div class="w-full max-w-3xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-purple-500 mb-2 flex-none">ü•≠ Tolak Pinjam: 24 - 15</h3>
            <div class="flex flex-col items-center flex-1 min-h-0 w-full overflow-y-auto">
               <div id="obj-container" class="bg-gray-100 p-2 rounded-2xl mb-4 flex flex-wrap gap-2 justify-center items-end min-h-[80px] w-full max-w-2xl flex-none">
                  <div class="obj-bundle" onclick="pecahIkatan(this)">10</div>
                  <div class="obj-bundle" onclick="pecahIkatan(this)">10</div>
                  <div id="sa-container" class="flex gap-1 flex-wrap justify-center">
                     <div class="obj-single draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-type="sa">1</div>
                     <div class="obj-single draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-type="sa">1</div>
                     <div class="obj-single draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-type="sa">1</div>
                     <div class="obj-single draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-type="sa">1</div>
                  </div>
               </div>
               
               <div class="drop-zone w-36 h-36 rounded-full border-4 border-purple-300 flex flex-wrap justify-center items-center p-2 flex-none" 
                    id="basket-zone" ondrop="dropOnBasket(event, 3)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                    <span class="text-purple-300 font-bold text-lg pointer-events-none">BAKUL</span>
               </div>
            </div>
        </div>`}function loadAbstractLink(e){setInfo("Lihat kaitan visual dan nombor."),e.innerHTML=`
        <div class="w-full max-w-4xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-orange-500 mb-2 flex-none">üîó Konkrit ke Abstrak</h3>
            <div class="flex-1 flex flex-col md:flex-row gap-4 max-w-4xl mx-auto items-center min-h-0 w-full overflow-y-auto">
               <div class="text-center bg-orange-50 p-2 rounded-2xl border-2 border-orange-100 flex-1">
                  <h4 class="text-sm font-bold text-slate-500 mb-2 uppercase">Visual</h4>
                  <div id="abs-model" class="flex flex-wrap gap-1 justify-center">
                     <div class="obj-bundle">10</div><div class="obj-bundle">10</div>
                     <div class="obj-single">1</div><div class="obj-single">1</div><div class="obj-single">1</div><div class="obj-single">1</div>
                  </div>
               </div>
               <div class="text-center bg-white p-2 rounded-2xl border-2 border-slate-200 flex-1">
                  <h4 class="text-sm font-bold text-slate-500 mb-2 uppercase">Bentuk Lazim</h4>
                  <table class="lazim-table">
                     <tr><td class="col-pu text-slate-400 text-sm uppercase">Pu</td><td class="text-slate-400 text-sm uppercase">Sa</td></tr>
                     <tr id="row-1"><td class="col-pu">2</td><td>4</td></tr>
                     <tr class="row-line text-slate-500"><td class="col-pu">- 1</td><td>5</td></tr>
                     <tr class="text-orange-600"><td class="col-pu" id="ans-pu">?</td><td id="ans-sa">?</td></tr>
                  </table>
               </div>
            </div>
            <div class="text-center mt-2 flex-none pb-2">
               <button id="btn-step1" class="btn-3d bg-orange-500 text-white font-bold py-2 px-4 rounded-xl text-base" onclick="runAbsStep(1)">Langkah 1: Pinjam ‚ÜòÔ∏è</button>
               <button id="btn-step2" class="btn-3d bg-slate-300 text-white font-bold py-2 px-4 rounded-xl text-base" onclick="runAbsStep(2)" disabled>Langkah 2: Selesai ‚úÖ</button>
            </div>
        </div>`}function loadStoryBuilder(e){setInfo("Masukkan nombor dan lihat penyelesaiannya."),e.innerHTML=`
        <div class="w-full max-w-2xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-rose-500 mb-2 flex-none">‚úçÔ∏è Bina Cerita Sendiri</h3>
            <div class="bg-white border-2 border-rose-200 rounded-2xl p-4 flex-1 flex flex-col items-center justify-start min-h-0 w-full overflow-y-auto">
               <p class="text-lg font-medium text-slate-700 mb-4 leading-loose flex-none">
                  Saya ada <input type="number" id="n1" class="border-2 border-rose-300 rounded-lg w-16 text-center font-bold text-rose-600 mx-2 p-1" value="32"> biji epal. <br>
                  Saya beri <input type="number" id="n2" class="border-2 border-rose-300 rounded-lg w-16 text-center font-bold text-rose-600 mx-2 p-1" value="15"> biji.
               </p>
               <button class="btn-3d bg-rose-500 text-white font-bold py-2 px-6 rounded-xl text-lg w-full max-w-xs flex-none" onclick="solveStory()">Kira Bakinya üßÆ</button>
               
               <div id="story-res" class="mt-4 hidden flex-none w-full">
                  <table class="lazim-table mx-auto bg-rose-50 p-2 rounded-xl border border-rose-100 w-3/4">
                     <tr class="text-slate-400 text-sm uppercase"><td>Pu</td><td>Sa</td></tr>
                     <tr id="s-row1"><td></td><td></td></tr>
                     <tr class="row-line text-slate-600" id="s-row2"><td></td><td></td></tr>
                     <tr class="text-rose-600 font-black" id="s-row3"><td></td><td></td></tr>
                  </table>
                  <p class="mt-2 text-lg font-bold text-green-600" id="s-msg"></p>
               </div>
            </div>
        </div>`}window.subtractionGames={activity2:{count:0,target:3},activity3:{count:0,target:15,bundles:2}},window.dragStart=function(e){draggedElement=e.target,e.target.classList.add("dragging")},window.dragEnd=function(e){draggedElement&&draggedElement.classList.remove("dragging"),document.querySelectorAll(".drop-zone").forEach(e=>e.classList.remove("drag-over"))},window.allowDrop=function(e){e.preventDefault(),e.currentTarget.classList.contains("drop-zone")&&e.currentTarget.classList.add("drag-over")},window.dragLeave=function(e){e.currentTarget.classList.contains("drop-zone")&&e.currentTarget.classList.remove("drag-over")},window.dropOnStoryBox=function(e,t){var a;e.preventDefault(),e.currentTarget.classList.remove("drag-over"),draggedElement&&((a=draggedElement.dataset.number)===t?(e.currentTarget.textContent=a,e.currentTarget.classList.add("filled"),draggedElement.remove(),draggedElement=null,speak("Betul!"),0===document.querySelectorAll(".drop-zone:not(.filled)").length&&(setInfo("Syabas! Anda faham cerita ini."),triggerWin())):(e.currentTarget.classList.add("shake"),setTimeout(()=>e.currentTarget.classList.remove("shake"),400),speak("Cuba lagi.")))},window.pecahIkatan=function(e){var t=window.subtractionGames.activity3;if(!(t.count>=t.target))if(0<document.querySelectorAll("#sa-container .obj-single").length)speak("Guna sa dahulu."),e.classList.add("shake"),setTimeout(()=>e.classList.remove("shake"),500);else{e.remove(),t.bundles--;var a=document.getElementById("sa-container");for(let e=0;e<10;e++)a.innerHTML+='<div class="obj-single draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-type="sa">1</div>';speak("Ikatan dipecahkan menjadi 10 sa.")}},window.dropOnBasket=function(e,t){e.preventDefault(),e.currentTarget.classList.remove("drag-over");var a,t=window.subtractionGames["activity"+t];t.count>=t.target?speak("Bakul dah penuh."):draggedElement&&"sa"===draggedElement.dataset.type&&(t.count++,draggedElement.remove(),draggedElement=null,(a=document.createElement("div")).className="obj-single",a.innerText="1",e.currentTarget.appendChild(a),t.count===t.target?(triggerWin(),speak("Syabas! Baki dikira dengan betul.")):speak(t.count.toString()))},window.runAbsStep=function(e){var t;1===e&&(document.getElementById("abs-model").innerHTML='<div class="obj-bundle">10</div><div class="obj-bundle opacity-50">10</div>'+'<div class="obj-single">1</div>'.repeat(14),(t=document.getElementById("row-1")).children[0].innerHTML='<span class="borrow-new">1</span><span class="strike">2</span>',t.children[1].innerHTML='<span class="borrow-new">14</span><span class="strike">4</span>',speak("Pecah ikatan sama dengan pinjam 1 puluh."),document.getElementById("btn-step1").disabled=!0,document.getElementById("btn-step1").className="btn-3d bg-slate-300 text-white font-bold py-3 px-8 rounded-xl text-lg",document.getElementById("btn-step2").disabled=!1,document.getElementById("btn-step2").className="btn-3d bg-orange-500 text-white font-bold py-3 px-8 rounded-xl text-lg"),2===e&&(document.getElementById("ans-pu").textContent="0",document.getElementById("ans-sa").textContent="9",speak("Jawapan ialah 9."),triggerWin(),document.getElementById("btn-step2").disabled=!0)},window.solveStory=function(){var e,t,a,n,d,l,r=parseInt(document.getElementById("n1").value),s=parseInt(document.getElementById("n2").value);isNaN(r)||isNaN(s)||r<=s?speak("Nombor tidak sah."):(e=r-s,t=Math.floor(r/10),r%=10,a=Math.floor(s/10),s%=10,n=Math.floor(e/10),d=e%10,document.getElementById("story-res").classList.remove("hidden"),l=document.getElementById("s-row1"),r<s?(l.children[0].innerHTML=`<span class="borrow-new">${t-1}</span><span class="strike">${t}</span>`,l.children[1].innerHTML=`<span class="borrow-new">${10+r}</span><span class="strike">${r}</span>`,speak("Perlu pinjam sebab sa tak cukup.")):(l.children[0].textContent=t,l.children[1].textContent=r,speak("Tolak terus tanpa pinjam.")),document.getElementById("s-row2").innerHTML=`<td class="col-pu">- ${a}</td><td>${s}</td>`,document.getElementById("s-row3").innerHTML=`<td class="col-pu">${n}</td><td>${d}</td>`,document.getElementById("s-msg").textContent=`Jawapan: ${e} biji epal.`,triggerWin())}</script>