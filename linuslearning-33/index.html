<!doctypehtml><html lang="ms-MY"class="overflow-hidden overscroll-none"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Matematik Ceria: Operasi Tolak</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap"rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script><style>body{font-family:Fredoka,sans-serif;background-color:#f0fdf4;background-image:radial-gradient(#86efac 2px,transparent 2px);background-size:30px 30px}.game-card{background:#fff;border:4px solid #475569;box-shadow:8px 8px 0 #00000020;border-radius:1.5rem;position:relative;display:flex;align-items:center;justify-content:center;flex-direction:column}.btn-3d{transition:all .1s;border-bottom-width:6px;border-color:rgba(0,0,0,.2);transform:translateY(0);cursor:pointer;display:inline-block}.btn-3d:active:not(:disabled){transform:translateY(4px);border-bottom-width:2px;box-shadow:none}.btn-3d:disabled{opacity:.6;cursor:not-allowed;border-bottom-width:6px;filter:grayscale(100%)}.shake{animation:shake .4s ease-in-out;border-color:#ef4444!important;background-color:#fee2e2!important}@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px) rotate(-5deg)}75%{transform:translateX(8px) rotate(5deg)}}.number-card{cursor:pointer;transition:transform .2s;user-select:none}.number-card:hover{transform:scale(1.05)}.drop-zone{border:3px dashed #94a3b8;background-color:#f8fafc;transition:all .3s ease;border-radius:.75rem;width:70px;height:50px;display:inline-flex;align-items:center;justify-content:center;font-size:1.2rem;font-weight:700;color:#334155}.drop-zone.drag-over{border-color:#3b82f6;background-color:#dbeafe;transform:scale(1.05)}.drop-zone.filled{border:3px solid #22c55e;background-color:#dcfce7;color:#15803d}.dragging{opacity:.5;transform:rotate(5deg)}.draggable-item{cursor:grab;user-select:none;touch-action:none}.draggable-item:active{cursor:grabbing}.alg-container{display:grid;grid-template-columns:30px 50px 50px;gap:5px 2px;justify-content:center;align-items:center;font-size:2rem;font-weight:700;color:#334155}.strike{position:relative;color:#ef4444}.strike::after{content:'';position:absolute;left:0;right:0;top:50%;height:3px;background-color:#ef4444;transform:rotate(-20deg)}.borrow-box{position:absolute;top:-35px;left:50%;transform:translateX(-50%);background-color:#dcfce7;border:2px solid #22c55e;color:#15803d;font-size:1.2rem;padding:1px 4px;border-radius:6px;z-index:10;min-width:30px;text-align:center;box-shadow:0 4px 0 rgba(0,0,0,.1)}.calc-line{grid-column:1/-1;height:3px;background-color:#475569;border-radius:2px;margin:5px 0}</style><body class="h-screen w-screen overflow-hidden text-slate-800 flex flex-col overscroll-none"><div class="flex-none p-4 z-50 pointer-events-none w-full"><div class="max-w-4xl mx-auto bg-green-400 border-4 border-green-600 rounded-full px-4 py-2 shadow-xl flex items-center justify-between pointer-events-auto transform hover:scale-[1.01] transition-transform"><div class="flex items-center gap-3"><span class="text-2xl animate-bounce">â–</span> <span id="info-text"class="text-lg font-bold text-green-900 leading-none mt-1">Operasi Tolak (Kumpul Semula)</span></div><button id="speak-btn"onclick="speakInfo()"class="bg-white hover:bg-green-50 text-green-600 border-2 border-green-200 rounded-full p-2 transition-colors shadow-sm">ğŸ”Š</button></div></div><div class="flex-1 w-full max-w-5xl mx-auto p-2 flex flex-col min-h-0"><div class="game-card p-4 mb-2 flex-1 w-full"><div id="activity-content"class="w-full relative z-10 flex flex-col items-center justify-center h-full transition-opacity duration-200"><div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">ğŸ“‰</div><h2 class="text-4xl md:text-5xl font-bold text-emerald-600 mb-4">Operasi Tolak</h2><p class="text-lg text-slate-500 mb-8 font-semibold">Top 5 Aktiviti Pemulihan<div class="text-4xl animate-bounce">ğŸ‘‡</div></div></div></div><div class="flex-none bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg p-2 border-2 border-white"><h3 class="text-lg font-bold text-slate-700 mb-1 text-center">ğŸ® Pilih Aktiviti</h3><div class="grid grid-cols-5 gap-2 mb-2"><button onclick="loadActivity(1)"class="btn-3d bg-blue-500 text-white font-bold py-2 rounded-xl text-xs">ğŸ¯<br>MCQ</button> <button onclick="loadActivity(2)"class="btn-3d bg-green-500 text-white font-bold py-2 rounded-xl text-xs">âœ…âŒ<br>Betul</button> <button onclick="loadActivity(3)"class="btn-3d bg-purple-500 text-white font-bold py-2 rounded-xl text-xs">ğŸƒ<br>Padan</button> <button onclick="loadActivity(4)"class="btn-3d bg-orange-500 text-white font-bold py-2 rounded-xl text-xs">ğŸ§²<br>Seret</button> <button onclick="loadActivity(5)"class="btn-3d bg-rose-500 text-white font-bold py-2 rounded-xl text-xs">ğŸ§ª<br>Simulasi</button></div><div class="flex justify-center gap-4 border-t-2 border-slate-100 pt-2"><button onclick="clearActivity()"class="btn-3d bg-slate-400 text-white font-bold py-1 px-4 rounded-full text-base">ğŸ  Menu</button> <button onclick="nextActivity()"class="btn-3d bg-indigo-500 text-white font-bold py-1 px-6 rounded-full text-lg">Seterusnya â¡ï¸</button></div></div></div><script>let currentActivity=0,ttsEnabled=!1,currentInfo="Selamat datang!",draggedElement=null;function triggerWin(){confetti({particleCount:150,spread:80,origin:{y:.6}})}function speak(e){var t;ttsEnabled&&"speechSynthesis"in window&&(window.speechSynthesis.cancel(),(e=new SpeechSynthesisUtterance(e)).lang="ms-MY",e.rate=.95,e.pitch=1.05,(t=window.speechSynthesis.getVoices().find(e=>"ms-MY"===e.lang||e.lang?.startsWith("ms")))&&(e.voice=t),window.speechSynthesis.speak(e))}function setInfo(e){currentInfo=e;let t=document.getElementById("info-text");t.style.opacity=0,setTimeout(()=>{t.textContent=e,t.style.opacity=1},200)}function speakInfo(){ttsEnabled||(ttsEnabled=!0,document.getElementById("speak-btn").classList.add("bg-green-100","text-green-600")),speak(currentInfo)}let r=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function rndSub(){var e=r(20,99),t=r(1,e-1);return{a:e,b:t,ans:e-t}}function makeOptions(e,t=6,n=4){for(var a=new Set([e]);a.size<n;){var l=r(1,t)*(.5<Math.random()?1:-1),l=Math.max(0,e+l);l!==e&&a.add(l)}return Array.from(a).sort(()=>Math.random()-.5)}function loadActivity(e){currentActivity=e;let t=document.getElementById("activity-content");t.style.opacity=0,setTimeout(()=>{1===e&&loadMCQ(t),2===e&&loadTrueFalse(t),3===e&&loadMatchingPairs(t),4===e&&loadDragAnswer(t),5===e&&loadBorrowSim(t),t.style.opacity=1},200)}function clearActivity(){currentActivity=0,document.getElementById("activity-content").innerHTML='<div class="py-10 text-center"><div class="text-8xl mb-6 animate-pulse">ğŸ“‰</div><h2 class="text-5xl font-bold text-emerald-600 mb-4">Operasi Tolak</h2><p class="text-2xl text-slate-500 mb-8 font-semibold">Mengumpul Semula (Pinjam)</p><div class="text-4xl animate-bounce">ğŸ‘‡</div></div>',setInfo("Pilih aktiviti untuk mula!")}function nextActivity(){let e=currentActivity+1;loadActivity(e=5<e?1:e)}function loadMCQ(e){let t=rndSub();setInfo("Pilih jawapan yang betul.");var n=makeOptions(t.ans,6,4);e.innerHTML=`
        <div class="w-full max-w-2xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-2xl font-bold text-blue-500 mb-2 flex-none">ğŸ¯ MCQ - Tolak</h3>
            <div class="bg-blue-50 rounded-2xl p-4 border-2 border-blue-200 flex-1 flex flex-col justify-center min-h-0 w-full overflow-y-auto">
               <div class="text-3xl font-bold text-slate-700 mb-6 flex-none">${t.a} - ${t.b} = <span class="text-blue-500">?</span></div>
               <div class="grid grid-cols-2 gap-3 mb-4 flex-none">${n.map(e=>`<button class="btn-3d bg-white border-blue-300 text-blue-600 text-2xl font-bold py-2 rounded-xl shadow-sm" onclick="checkMCQ(this, ${e}, ${t.ans})">${e}</button>`).join("")}</div>
               <div id="mcq-msg" class="text-lg font-bold min-h-[24px] flex-none"></div>
               <div class="mt-2 flex-none"><button class="text-slate-400 font-bold underline" onclick="loadMCQ(document.getElementById('activity-content'))">Soalan Baharu ğŸ”„</button></div>
            </div>
        </div>`}function loadTrueFalse(e){var t=rndSub(),n=.5<Math.random(),a=n?t.ans:t.ans+(.5<Math.random()?1:-1)*r(1,5);setInfo("Betul atau Salah?"),e.innerHTML=`
        <div class="w-full max-w-2xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-2xl font-bold text-green-500 mb-2 flex-none">âœ…âŒ Betul atau Salah</h3>
            <div class="bg-green-50 rounded-2xl p-4 border-2 border-green-200 flex-1 flex flex-col justify-center min-h-0 w-full overflow-y-auto">
               <div class="text-3xl font-bold text-slate-700 mb-6 flex-none">${t.a} - ${t.b} = ${a}</div>
               <div class="flex gap-4 justify-center mb-4 flex-none">
                 <button class="btn-3d bg-green-600 text-white font-bold py-2 px-6 rounded-xl text-xl" onclick="answerTF(${n}, true)">âœ… Betul</button>
                 <button class="btn-3d bg-red-500 text-white font-bold py-2 px-6 rounded-xl text-xl" onclick="answerTF(${n}, false)">âŒ Salah</button>
               </div>
               <div id="tf-msg" class="text-lg font-bold min-h-[24px] flex-none"></div>
               <div class="mt-2 flex-none"><button class="text-slate-400 font-bold underline" onclick="loadTrueFalse(document.getElementById('activity-content'))">Soalan Baharu ğŸ”„</button></div>
            </div>
        </div>`}function loadMatchingPairs(e){setInfo("Padankan ayat matematik dengan jawapannya.");var t=[],n=[];for(let e=0;e<4;e++){var a=rndSub();t.push({id:"q"+e,text:a.a+" - "+a.b,ans:a.ans}),n.push({id:"a"+e,text:String(a.ans)})}e.innerHTML=`
        <div class="w-full max-w-4xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-purple-500 mb-2 flex-none">ğŸƒ Padanan</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 flex-1 min-h-0 overflow-y-auto">
               <div class="bg-purple-50 p-2 rounded-2xl border-2 border-purple-200 overflow-y-auto">
                  <h4 class="text-center font-bold text-slate-400 mb-2 uppercase text-xs">Soalan</h4>
                  <div class="flex flex-col gap-2">
                     ${t.map(e=>`<div class="bg-white border-2 border-purple-100 rounded-lg p-1 px-2 flex justify-between items-center h-12"><span class="text-lg font-bold text-purple-600">${e.text}</span><span class="drop-zone scale-90" ondrop="dropPair(event, ${e.ans})" ondragover="allowDrop(event)" ondragleave="dragLeave(event)"></span></div>`).join("")}
                  </div>
               </div>
               <div class="bg-white p-2 rounded-2xl border-2 border-slate-200 overflow-y-auto">
                  <h4 class="text-center font-bold text-slate-400 mb-2 uppercase text-xs">Jawapan</h4>
                  <div class="flex flex-wrap gap-2 justify-center content-start">
                     ${e=n,e.sort(()=>Math.random()-.5).map(e=>`<div class="btn-3d bg-purple-500 text-white border-purple-700 rounded-md w-14 h-10 flex items-center justify-center text-lg font-bold cursor-move draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-val="${e.text}">${e.text}</div>`).join("")}
                  </div>
               </div>
            </div>
            <div id="pair-msg" class="mt-2 text-center font-bold text-lg text-green-600 min-h-[24px] flex-none"></div>
        </div>`,window._pairsToGo=t.length}function loadDragAnswer(e){var t=r(20,99),n=r(1,t-1),a=t-n,l=Array.from(new Set([a,Math.max(0,a-1),1+a,Math.max(0,a-2),2+a])).sort(()=>Math.random()-.5);setInfo("Seret jawapan yang betul."),e.innerHTML=`
        <div class="w-full max-w-3xl text-center flex flex-col h-full overflow-hidden">
            <h3 class="text-xl font-bold text-orange-500 mb-2 flex-none">ğŸ§² Seret Jawapan</h3>
            <div class="bg-orange-50 rounded-2xl p-4 border-2 border-orange-200 flex-1 flex flex-col justify-center min-h-0 w-full overflow-y-auto">
                <div class="text-3xl font-bold text-slate-700 mb-6 flex items-center justify-center gap-2 flex-none">
                    ${t} - ${n} = <span class="drop-zone" ondrop="dropToBlank(event, ${a})" ondragover="allowDrop(event)" ondragleave="dragLeave(event)"></span>
                </div>
                <div class="flex flex-wrap gap-2 justify-center flex-none">
                    ${l.map(e=>`<div class="btn-3d bg-orange-500 text-white border-orange-700 rounded-lg p-2 px-4 text-xl font-bold cursor-move draggable-item" draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-number="${e}">${e}</div>`).join("")}
                </div>
                <div id="b5-msg" class="text-lg font-bold mt-4 min-h-[24px] text-green-600 flex-none"></div>
                <div class="mt-2 flex-none"><button class="text-slate-400 font-bold underline" onclick="loadDragAnswer(document.getElementById('activity-content'))">Soalan Baharu ğŸ”„</button></div>
            </div>
        </div>`}function loadBorrowSim(e){let n=r(2,8);var t=r(0,5);let a=r(1,n-1),l=r(t+1,9);n,a,l;let o=t+10,s=(setInfo("Tekan 'Pinjam' untuk selesaikan."),e.innerHTML=`
        <div class="w-full max-w-4xl text-center flex flex-col h-full overflow-hidden">
             <h3 class="text-xl font-bold text-rose-500 mb-2 flex-none">ğŸ§ª Simulasi Pinjam 10</h3>
             
             <div class="flex-1 flex flex-col md:flex-row gap-4 items-center justify-center min-h-0 w-full overflow-y-auto">
                <div class="bg-rose-50 p-4 rounded-2xl border-2 border-rose-100 shadow-inner pt-10 flex-none">
                   <div class="alg-container">
                      <div></div><div class="text-xs text-slate-400 uppercase tracking-widest mb-1">Pu</div><div class="text-xs text-slate-400 uppercase tracking-widest mb-1">Sa</div>
                      <div></div><div class="relative" id="cell-tens">${n}</div><div class="relative" id="cell-ones">${t}</div>
                      <div class="text-slate-400 font-black">-</div><div>${a}</div><div>${l}</div>
                      <div class="calc-line"></div>
                      <div></div><div id="ans-tens" class="text-rose-600">?</div><div id="ans-ones" class="text-rose-600">?</div>
                   </div>
                </div>
                <div class="flex flex-col justify-center gap-2 min-w-[200px] flex-none">
                   <div class="text-sm font-bold text-slate-600 mb-1">Langkah Pengiraan:</div>
                   <button id="btn-borrow" class="btn-3d bg-rose-500 text-white py-2 px-4 rounded-xl text-lg font-bold flex items-center justify-center gap-2">1. Pinjam â†˜ï¸</button>
                   <button id="btn-calc" class="btn-3d bg-slate-300 text-white py-2 px-4 rounded-xl text-lg font-bold flex items-center justify-center gap-2" disabled>2. Kira âœ…</button>
                   <div id="borrow-fb" class="mt-2 font-bold text-center text-sm h-6 text-slate-500">...</div>
                   <button class="text-slate-400 font-bold underline mt-2 hover:text-rose-500" onclick="loadBorrowSim(document.getElementById('activity-content'))">Soalan Baru ğŸ”„</button>
                </div>
             </div>
        </div>`,document.getElementById("cell-tens")),d=document.getElementById("cell-ones");document.getElementById("btn-borrow").onclick=function(){this.disabled=!0,this.className="btn-3d bg-slate-300 text-white py-4 px-6 rounded-xl text-xl font-bold flex items-center justify-center gap-2";var e=document.getElementById("btn-calc");e.disabled=!1,e.className="btn-3d bg-emerald-500 text-white py-4 px-6 rounded-xl text-xl font-bold flex items-center justify-center gap-2 animate-bounce",s.classList.add("strike"),s.innerHTML+=`<div class="borrow-box">${n-1}</div>`,d.classList.add("strike"),d.innerHTML+=`<div class="borrow-box">${o}</div>`,document.getElementById("borrow-fb").textContent="10 ditambah pada Sa!",speak("Satu puluh dipinjam, jadi sepuluh sa.")},document.getElementById("btn-calc").onclick=function(){var e=o-l,t=n-1-a;document.getElementById("ans-ones").textContent=e,document.getElementById("ans-tens").textContent=t,this.disabled=!0,this.classList.remove("animate-bounce"),document.getElementById("borrow-fb").textContent="Jawapan: "+t+e,document.getElementById("borrow-fb").className="mt-4 font-bold text-center text-3xl h-8 text-emerald-600",triggerWin(),speak("Jawapan ialah "+t+e)}}window.dragStart=function(e){draggedElement=e.target,e.target.classList.add("dragging")},window.dragEnd=function(e){e.target.classList.remove("dragging"),document.querySelectorAll(".drop-zone").forEach(e=>e.classList.remove("drag-over"))},window.allowDrop=function(e){e.preventDefault(),e.currentTarget.classList.contains("drop-zone")&&e.currentTarget.classList.add("drag-over")},window.dragLeave=function(e){e.currentTarget.classList.contains("drop-zone")&&e.currentTarget.classList.remove("drag-over")},window.checkMCQ=function(e,t,n){var a=document.getElementById("mcq-msg");t===n?(a.textContent="Bagus! Jawapan betul.",a.className="text-xl font-bold text-green-600 mt-2",setInfo("Bagus! Jawapan betul."),speak("Bagus!"),triggerWin()):(e.classList.add("shake"),setTimeout(()=>e.classList.remove("shake"),400),a.textContent="Cuba lagi.",a.className="text-xl font-bold text-rose-500 mt-2",setInfo("Cuba lagi."),speak("Cuba lagi."))},window.answerTF=function(e,t){var n=document.getElementById("tf-msg");e===t?(n.textContent="Tepat sekali!",n.className="text-xl font-bold text-green-600 mt-2",setInfo("Tepat!"),speak("Tepat!"),triggerWin()):(n.textContent="Kurang tepat. Cuba lagi.",n.className="text-xl font-bold text-rose-500 mt-2",setInfo("Kurang tepat."),speak("Kurang tepat."))},window.dropPair=function(e,t){var n;e.preventDefault(),e.currentTarget.classList.remove("drag-over"),draggedElement&&(n=parseInt(draggedElement.dataset.val),e.currentTarget.classList.remove("shake"),n===t?(e.currentTarget.textContent=n,e.currentTarget.classList.add("filled"),draggedElement.remove(),draggedElement=null,window._pairsToGo--,0===window._pairsToGo?(setInfo(document.getElementById("pair-msg").textContent="Semua padanan betul!"),triggerWin()):speak("Betul!")):(e.currentTarget.classList.add("shake"),setTimeout(()=>e.currentTarget.classList.remove("shake"),400),setInfo("Padanan belum tepat."),speak("Cuba lagi.")))},window.dropToBlank=function(e,t){var n;e.preventDefault(),e.currentTarget.classList.remove("drag-over"),draggedElement&&(n=parseInt(draggedElement.dataset.number),e.currentTarget.classList.remove("shake"),n===t?(e.currentTarget.textContent=n,e.currentTarget.classList.add("filled"),draggedElement.remove(),draggedElement=null,setInfo("Betul!"),document.getElementById("b5-msg").textContent="Syabas!",triggerWin()):(e.currentTarget.classList.add("shake"),setTimeout(()=>e.currentTarget.classList.remove("shake"),400),setInfo("Cuba lagi."),speak("Cuba lagi")))}</script>